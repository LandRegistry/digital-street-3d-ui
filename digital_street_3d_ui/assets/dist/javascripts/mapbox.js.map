{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./search_index_map_ui/assets/src/javascripts/mapbox.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","mapboxgl","accessToken","map","Map","style","center","zoom","pitch","bearing","container","antialias","buildingHeightSourceLayer","floorplanLayers","layer","sourceLayer","spatialUnitsDiv","document","getElementById","spatialUnits","JSON","parse","innerHTML","toggleLayers","filter","includes","getLayoutProperty","setLayoutProperty","this","className","on","buildingIdsWithFloorplans","features","querySourceFeatures","j","properties","fid","push","buildingFilter","concat","buildingFeatures","setFeatureState","id","source","hide","displayFloorplan","titleInformationOverlay","buildingId","baseHeight","extrusionHeight","floorHeight","RelHmax","num_floors","floor","setPaintProperty","validate","highlightTitle","featureId","titleFeatureIds","titleNumber","featureIds","getFeatureIdsByTitleNumber","getSpatialUnitById","k","highlight","find","element","display","e","layers","queryRenderedFeatures","point","length","removeFeatureState","disableHighlightTitle","currentFeature","spatialUnit","BAUnits","BAUnit","currentBAUnit","title","address","pricePaid","rights","restrictions","responsibilities","currentPricePaid","amount","date","right","currentRight","newRight","rightId","type","description","mortgages","startDate","endDate","partyId","restriction","currentRestriction","newRestriction","responsibility","currentResponsibility","newResponsibility","tenureTypeHeading","createElement","textContent","appendChild","titleNumberLabel","append","titleNumberText","addressDiv","addressLabel","addressText","pricesPaidDiv","pricesPaidLabel","pricePaidDiv","pricePaidText","rightsDiv","rightsLabel","rightDiv","rightTypeLabel","rightTypeText","rightDescriptionLabel","rightDescriptionText","console","log","toLowerCase","rightEndLabel","rightEndText","partyLabel","partyText","restrictionsDiv","restrictionsLabel","restrictionDiv","restrictionTypeLabel","restrictionTypeText","restrictionDescriptionLabel","restrictionDescriptionText","responsibilitiesDiv","responsibilitiesLabel","responsibilityDiv","responsibilityTypeLabel","responsibilityTypeText","responsibilityDescriptionLabel","responsibilityDescriptionText","filterCheckboxes","getElementsByName","addEventListener","target","preventDefault","stopPropagation"],"mappings":"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","file":"mapbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","mapboxgl.accessToken = 'pk.eyJ1IjoibWF0dGdpcmRsZXIiLCJhIjoiY2lteW85cm5lMDBmcnY5bTFxY2Zsc3c2OCJ9.VvO2DhAhOVrcjJ0Usw8JIA'\n    let map = new mapboxgl.Map({\n    style: 'mapbox://styles/mattgirdler/cjznu3ztu06m31clp2j37yybz',\n    center:[-3.5208657, 50.7227184],\n    zoom: 17.5,\n    pitch: 45,\n    bearing: -17.6,\n    container: 'map',\n    antialias: true\n})\n\nconst buildingHeightSourceLayer = \"exeter_buildings_with_height-0ygi87\"\nconst floorplanLayers = [\n    {layer: 'airspace-leasehold-a6g827', sourceLayer: 'airspace-a6g827'},\n    {layer: 'freehold-diumk5', sourceLayer: 'osgb1000012317615-freehold-diumk5'},\n    {layer: 'leasehold-0-83okhj', sourceLayer: 'osgb1000012317615-0-83okhj'},\n    {layer: 'leasehold-1-54g9gf', sourceLayer: 'osgb1000012317615-1-54g9gf'},\n    {layer: 'leasehold-2-ccs62k', sourceLayer: 'osgb1000012317615-2-ccs62k'},\n    {layer: 'leasehold-3-8aah9q', sourceLayer: 'osgb1000012317615-3-8aah9q'}\n]\n\nconst spatialUnitsDiv = document.getElementById('spatial-units')\nconst spatialUnits = JSON.parse(spatialUnitsDiv.innerHTML)[0]\n\nmap.on('load', function() {\n\n    // Create array of building IDs with boundary/floorplan data\n    const buildingIdsWithFloorplans = []\n    for (let i in floorplanLayers) {\n        // Ignore airspace layers\n        if (!floorplanLayers[i].layer.includes('airspace')) {\n            const features = map.querySourceFeatures('composite', {\n                sourceLayer: floorplanLayers[i].sourceLayer,\n            })\n            for (let j in features) {\n                if (!buildingIdsWithFloorplans.includes(features[j].properties.fid)) {\n                    buildingIdsWithFloorplans.push(features[j].properties.fid)\n                }\n            }\n        }\n    }\n\n    // Hide any buildings that have boundary/floorplan data \n    let buildingFilter = [\"in\", \"fid\"].concat(buildingIdsWithFloorplans)\n    const buildingFeatures = map.querySourceFeatures('composite', {\n        sourceLayer: buildingHeightSourceLayer,\n        filter: buildingFilter\n    })\n    for (let i in buildingFeatures) {\n        map.setFeatureState({id: buildingFeatures[i].id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, {'hide': true})\n        displayFloorplan(buildingFeatures[i].properties.fid)\n    }\n\n    // Create an overlay\n    let titleInformationOverlay = document.getElementById('title-information-overlay')\n    let toggleLayersOverlay = document.getElementById('toggle-layers-overlay')\n    toggleLayersOverlay.style.display = 'block'\n\n    // Display features after hiding the building geometry\n    function displayFloorplan(buildingId) {\n        for (let i in floorplanLayers) {\n            map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'visible')\n\n            // Don't worry about extruding the airspace layer, this is extruded by default\n            if (!floorplanLayers[i].layer.includes('airspace')) {\n                // Get the features within the layer\n                const features = map.querySourceFeatures('composite', {\n                    sourceLayer: floorplanLayers[i].sourceLayer\n                })\n\n                for (let j in features) {\n                    let baseHeight = 0\n                    let extrusionHeight = 0\n\n                    if (floorplanLayers[i].layer.includes('freehold')) {\n                        extrusionHeight = 120\n\n                        // TODO - Add a buffer to the freehold to avoid clipping\n                    } else {\n                        const buildingId = features[j].properties.fid\n                        // Get building height from OS dataset\n                        const buildingFeature = map.querySourceFeatures('composite', {\n                            sourceLayer: buildingHeightSourceLayer,\n                            filter: [\"==\", 'fid', buildingId]\n                        })[0]\n                        const buildingHeight = buildingFeature.properties.RelHmax \n    \n                        // Generate feature height values based on building height\n                        const floorHeight = buildingHeight / features[j].properties.num_floors\n                        extrusionHeight = floorHeight * (features[j].properties.floor + 1)\n                        baseHeight = floorHeight*features[j].properties.floor\n                    }\n\n                    // Extrude the features\n                    map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', extrusionHeight, {validate: true})\n                    map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-base', baseHeight, {validate: true})\n                }\n            } \n        }\n    }\n\n    function hideFloorplan(buildingId) {\n        for (let i in floorplanLayers) {\n            const features = map.querySourceFeatures('composite', {\n                sourceLayer: floorplanLayers[i].sourceLayer, \n                filter: [\"==\", 'fid', buildingId]\n            })\n            if (features.length > 0) {\n                map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-base', 0, {validate: true})\n                map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', 0, {validate: true})\n            }\n        }\n    }\n\n    function highlightTitle(featureId) {\n\n        let spatialUnit = getSpatialUnitById(featureId)\n        let spatialUnitTitleNumber = spatialUnit['ba_units'][0]['name']\n        let titleFeatureIds = getFeatureIdsByTitleNumber(spatialUnitTitleNumber)\n\n        for (let i in floorplanLayers) {\n            for (let j in titleFeatureIds) {\n                const features = map.querySourceFeatures('composite', { \n                    sourceLayer: floorplanLayers[i].sourceLayer,\n                    filter: ['==', 'id', titleFeatureIds[j]] \n                })\n\n                for (let k in features) {\n                    map.setFeatureState({id: features[k].id, source: 'composite', sourceLayer: floorplanLayers[i].sourceLayer}, {'highlight': true})\n                }\n            }\n        }\n    }\n\n    function disableHighlightTitle() {\n        for (let i in floorplanLayers) {\n            titleInformationOverlay.style.display = 'none'\n            map.removeFeatureState({source: 'composite', sourceLayer: floorplanLayers[i].sourceLayer})\n        }\n    }\n\n    function getFeatureIdsByTitleNumber(titleNumber) {\n        let featureIds = []\n        for (let i in spatialUnits) {\n            if (spatialUnits[i]['ba_units'][0]['name'] == titleNumber) {\n                featureIds.push(spatialUnits[i]['id'])\n            }\n        }\n        return featureIds\n    }\n\n    function getSpatialUnitById(featureId) {\n        let result = spatialUnits.find(function(element) {\n            return element.id == featureId\n        })\n        return result\n    }\n\n    // Toggle building polygons on/off\n    // map.on('click', 'exeter-buildings-with-height', function (e) {\n    //     const features = map.queryRenderedFeatures(e.point)\n    //     const feature = features[0]\n    //     if (map.getFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}).hide) {\n    //         hideFloorplan(feature.properties.fid)\n    //         map.removeFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, 'hide')\n    //     } else {\n    //         map.setFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, {'hide': true})\n    //         displayFloorplan(feature.properties.fid)\n    //     }\n    // })\n\n    // Display title information from floorplans\n    map.on('mousemove', function(e) {\n\n        // Create array of floorplan style layers for filtering\n        const layers = []\n        for (let i in floorplanLayers) {\n            layers.push(floorplanLayers[i].layer)\n        }\n\n        // Check if mouseover is on a floorplan layer\n        const features = map.queryRenderedFeatures(e.point, { layers: layers })\n        if (features.length > 0) {\n\n            disableHighlightTitle()\n\n            const currentFeature = features[0]\n\n            highlightTitle(currentFeature.properties.id)\n            \n            let featureId = currentFeature.properties.id\n\n            let spatialUnit = getSpatialUnitById(featureId)\n\n            let BAUnits = []\n\n            if (spatialUnit) {\n                \n                for (let BAUnit in spatialUnit['ba_units']) {\n                    let currentBAUnit = spatialUnit['ba_units'][BAUnit]\n\n                    let title = { \n                        address: spatialUnit['address'],\n                        titleNumber: currentBAUnit['name'],\n                        pricePaid: [],\n                        rights: [],\n                        restrictions: [],\n                        responsibilities: []\n                    }\n\n                    // Prices Paid\n                    for (let pricePaid in spatialUnit['price_paid']) {\n                        let currentPricePaid = spatialUnit['price_paid'][pricePaid]\n                        title['pricePaid'].push({\n                            amount: currentPricePaid['amount'],\n                            date: currentPricePaid['date']\n                        })\n                    }\n\n                    // Rights\n                    for (let right in currentBAUnit['rights']) {\n                        let currentRight = currentBAUnit['rights'][right]\n                        let newRight = {\n                            rightId: currentRight['right_id'],\n                            type: currentRight['type'],\n                            description: currentRight['description'],\n                            mortgages: [],\n                            startDate: currentRight['start_date'],\n                            endDate: currentRight['end_date']\n                        }\n\n                        if (currentRight['party']) {\n                            newRight['party'] = {\n                                name: currentRight['party']['name'],\n                                type: currentRight['party']['type'],\n                                partyId: currentRight['party']\n                            }\n                        }\n\n                        title['rights'].push(newRight)\n                    }\n\n                    // Add restrictions\n                    for (let restriction in currentBAUnit['restrictions']) {\n                        let currentRestriction = currentBAUnit['restrictions'][restriction]\n                        let newRestriction = {\n                            type: currentRestriction['type'],\n                            description: currentRestriction['description'],\n                            startDate: currentRestriction['start_date'],\n                            endDate: currentRestriction['end_date']\n                        }\n\n                        if (currentRestriction['party']) {\n                            newRestriction['party'] = {\n                                name: currentRestriction['party']['name'],\n                                type: currentRestriction['party']['type'],\n                                partyId: currentRestriction['party']\n                            }\n                        }\n                        title['restrictions'].push(newRestriction)\n                    }\n\n                    // Add responsibilities\n                    for (let responsibility in currentBAUnit['responsibilities']) {\n                        let currentResponsibility = currentBAUnit['responsibilities'][responsibility]\n                        let newResponsibility = {\n                            type: currentResponsibility['type'],\n                            description: currentResponsibility['description'],\n                            startDate: currentResponsibility['start_date'],\n                            endDate: currentResponsibility['end_date']\n                        }\n\n                        if (currentResponsibility['party']) {\n                            newResponsibility['party'] = {\n                                name: currentResponsibility['party']['name'],\n                                type: currentResponsibility['party']['type'],\n                                partyId: currentResponsibility['party']\n                            }\n                        }\n                        title['responsibilities'].push(newResponsibility)\n                    }\n                    BAUnits.push(title)\n                }\n            } \n\n            // Create HTML for title details \n            titleInformationOverlay.innerHTML = ''\n\n            // titleInformationOverlay.innerHTML = JSON.stringify(spatialUnit)\n            let tenureTypeHeading = document.createElement('h1')\n            tenureTypeHeading.textContent = BAUnits[0]['rights'][0]['type']\n            titleInformationOverlay.appendChild(tenureTypeHeading)\n\n            let titleNumberLabel = document.createElement('strong')\n            titleNumberLabel.textContent = \"Title number: \"\n            titleInformationOverlay.append(titleNumberLabel)\n            let titleNumberText = document.createElement('span')\n            titleNumberText.append(BAUnits[0]['titleNumber'])\n            titleInformationOverlay.appendChild(titleNumberText)\n            \n            // Address data\n            if (BAUnits[0]['address']) {\n                let addressDiv = document.createElement('div')\n                let addressLabel = document.createElement('strong')\n                addressLabel.textContent = 'Address: '\n                addressDiv.append(addressLabel)\n\n                let addressText = document.createElement('span')\n                addressText.textContent = BAUnits[0]['address']\n                addressDiv.append(addressText)\n                titleInformationOverlay.appendChild(addressDiv)\n            }\n\n            titleInformationOverlay.appendChild(document.createElement('hr'))\n\n            // Price Paid data\n            let pricesPaidDiv = document.createElement('div')\n            if (BAUnits[0]['pricePaid'].length > 0) {\n                let pricesPaidLabel = document.createElement('strong')\n                pricesPaidLabel.textContent = 'Prices paid:'\n                pricesPaidDiv.appendChild(pricesPaidLabel)\n\n                for (let pricePaid in BAUnits[0]['pricePaid']) {\n                    let pricePaidDiv = document.createElement('div')\n                    pricePaidDiv.style = \"margin-left: 10px;\"\n\n                    let pricePaidText = document.createElement('span')\n                    pricePaidText.textContent = BAUnits[0]['pricePaid'][pricePaid]['date'] + \" - \" + BAUnits[0]['pricePaid'][pricePaid]['amount']\n                    pricePaidDiv.appendChild(pricePaidText)\n                    pricePaidDiv.appendChild(document.createElement('br'))\n\n                    pricesPaidDiv.appendChild(pricePaidDiv)\n                }\n                titleInformationOverlay.appendChild(pricesPaidDiv)\n                titleInformationOverlay.appendChild(document.createElement('hr'))\n            }\n\n            // Rights data\n            let rightsDiv = document.createElement('div')\n            if (BAUnits[0]['rights'].length > 0) {\n                let rightsLabel = document.createElement('strong')\n                rightsLabel.textContent = 'Rights:'\n                rightsDiv.appendChild(rightsLabel)\n                for (let right in BAUnits[0]['rights']) {\n                    let rightDiv = document.createElement('div')\n                    rightDiv.style = \"margin-left: 10px;\"\n\n                    // Right Type\n                    let rightTypeLabel  = document.createElement('strong')\n                    rightTypeLabel.textContent = 'Type: '\n                    rightDiv.appendChild(rightTypeLabel)\n\n                    let rightTypeText = document.createElement('span')\n                    rightTypeText.textContent = BAUnits[0]['rights'][right]['type']\n                    rightDiv.appendChild(rightTypeText)\n                    rightDiv.appendChild(document.createElement('br'))\n\n                    // Right description\n                    if (BAUnits[0]['rights'][right]['description']) {\n                        let rightDescriptionLabel  = document.createElement('strong')\n                        rightDescriptionLabel.textContent = 'Description: '\n                        rightDiv.appendChild(rightDescriptionLabel)\n\n                        let rightDescriptionText = document.createElement('span')\n                        rightDescriptionText.textContent = BAUnits[0]['rights'][right]['description']\n                        rightDiv.appendChild(rightDescriptionText)\n                        rightDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // If right is a leasehold, display the end date\n                    console.log(BAUnits[0]['rights'][right])\n                    if (BAUnits[0]['rights'][right]['endDate'] && BAUnits[0]['rights'][right]['type'].toLowerCase().includes('leasehold')) {\n                        let rightEndLabel  = document.createElement('strong')\n                        rightEndLabel.textContent = 'End date: '\n                        rightDiv.appendChild(rightEndLabel)\n\n                        let rightEndText = document.createElement('span')\n                        rightEndText.textContent = BAUnits[0]['rights'][right]['endDate']\n                        rightDiv.appendChild(rightEndText)\n                        rightDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // Right Party\n                    let partyLabel  = document.createElement('strong')\n                    partyLabel.textContent = 'Party: '\n                    rightDiv.appendChild(partyLabel)\n\n                    let partyText = document.createElement('span')\n                    partyText.textContent = BAUnits[0]['rights'][right]['party']['name'] + \" (\" + BAUnits[0]['rights'][right]['party']['type'] + \")\"\n\n                    rightDiv.appendChild(partyText)\n                    rightDiv.appendChild(document.createElement('hr'))\n\n                    rightsDiv.appendChild(rightDiv)\n                }\n                titleInformationOverlay.appendChild(rightsDiv)\n            }\n\n            // Restrictions data\n            let restrictionsDiv = document.createElement('div')\n            if (BAUnits[0]['restrictions'].length > 0) {\n                let restrictionsLabel = document.createElement('strong')\n                restrictionsLabel.textContent = 'Restrictions:'\n                restrictionsDiv.appendChild(restrictionsLabel)\n                for (restriction in BAUnits[0]['restrictions']) {\n                    let restrictionDiv = document.createElement('div')\n                    restrictionDiv.style = \"margin-left: 10px;\"\n\n                    // Restriction Type\n                    let restrictionTypeLabel  = document.createElement('strong')\n                    restrictionTypeLabel.textContent = 'Type: '\n                    restrictionDiv.appendChild(restrictionTypeLabel)\n\n                    let restrictionTypeText = document.createElement('span')\n                    restrictionTypeText.textContent = BAUnits[0]['restrictions'][restriction]['type']\n                    restrictionDiv.appendChild(restrictionTypeText)\n                    restrictionDiv.appendChild(document.createElement('br'))\n\n                    // Restriction description\n                    if (BAUnits[0]['restrictions'][restriction]['description']) {\n                        let restrictionDescriptionLabel  = document.createElement('strong')\n                        restrictionDescriptionLabel.textContent = 'Description: '\n                        restrictionDiv.appendChild(restrictionDescriptionLabel)\n\n                        let restrictionDescriptionText = document.createElement('span')\n                        restrictionDescriptionText.textContent = BAUnits[0]['restrictions'][restriction]['description']\n                        restrictionDiv.appendChild(restrictionDescriptionText)\n                        restrictionDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // Restriction Party\n                    let partyLabel  = document.createElement('strong')\n                    partyLabel.textContent = 'Party: '\n                    restrictionDiv.appendChild(partyLabel)\n\n                    let partyText = document.createElement('span')\n                    partyText.textContent = BAUnits[0]['restrictions'][restriction]['party']['name'] + \" (\" + BAUnits[0]['restrictions'][restriction]['party']['type'] + \")\"\n\n                    restrictionDiv.appendChild(partyText)\n                    restrictionDiv.appendChild(document.createElement('hr'))\n\n                    restrictionsDiv.appendChild(restrictionDiv)\n                }\n                titleInformationOverlay.appendChild(restrictionsDiv)\n            }\n\n            // Responsibilities data\n            let responsibilitiesDiv = document.createElement('div')\n            if (BAUnits[0]['responsibilities'].length > 0) {\n                let responsibilitiesLabel = document.createElement('strong')\n                responsibilitiesLabel.textContent = 'Responsibilities:'\n                responsibilitiesDiv.appendChild(responsibilitiesLabel)\n                for (responsibility in BAUnits[0]['responsibilities']) {\n                    let responsibilityDiv = document.createElement('div')\n                    responsibilityDiv.style = \"margin-left: 10px;\"\n\n                    // Responsibility Type\n                    let responsibilityTypeLabel  = document.createElement('strong')\n                    responsibilityTypeLabel.textContent = 'Type: '\n                    responsibilityDiv.appendChild(responsibilityTypeLabel)\n\n                    let responsibilityTypeText = document.createElement('span')\n                    responsibilityTypeText.textContent = BAUnits[0]['responsibilities'][responsibility]['type']\n                    responsibilityDiv.appendChild(responsibilityTypeText)\n                    responsibilityDiv.appendChild(document.createElement('br'))\n\n                    // Responsibility description\n                    if (BAUnits[0]['responsibilities'][responsibility]['description']) {\n                        let responsibilityDescriptionLabel  = document.createElement('strong')\n                        responsibilityDescriptionLabel.textContent = 'Description: '\n                        responsibilityDiv.appendChild(responsibilityDescriptionLabel)\n\n                        let responsibilityDescriptionText = document.createElement('span')\n                        responsibilityDescriptionText.textContent = BAUnits[0]['responsibilities'][responsibility]['description']\n                        responsibilityDiv.appendChild(responsibilityDescriptionText)\n                        responsibilityDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // Responsibility Party\n                    let partyLabel  = document.createElement('strong')\n                    partyLabel.textContent = 'Party: '\n                    responsibilityDiv.appendChild(partyLabel)\n\n                    let partyText = document.createElement('span')\n                    partyText.textContent = BAUnits[0]['responsibilities'][responsibility]['party']['name'] + \" (\" + BAUnits[0]['responsibilities'][responsibility]['party']['type'] + \")\"\n\n                    responsibilityDiv.appendChild(partyText)\n                    responsibilityDiv.appendChild(document.createElement('hr'))\n\n                    responsibilitiesDiv.appendChild(responsibilityDiv)\n                }\n                titleInformationOverlay.appendChild(responsibilitiesDiv)\n            }\n            // Display overlay\n            titleInformationOverlay.style.display = 'block'\n        }\n    })\n})\n\nfunction toggleLayers(filter) {\n    for (let i in floorplanLayers) {\n        if (floorplanLayers[i].layer.includes(filter)) {\n            let visibility = map.getLayoutProperty(floorplanLayers[i].layer, 'visibility')\n            if (visibility == 'visible') {\n                map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'none')\n                this.className = ''\n            } else {  \n                this.className = 'active'\n                map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'visible')\n            }\n        }\n    }\n}\n\nlet filterCheckboxes = document.getElementsByName('filter')\nfor (let i = 0; i<filterCheckboxes.length; i++) {\n    filterCheckboxes[i].addEventListener('change', function(e) {\n    let filter = e.target.value\n    e.preventDefault()\n    e.stopPropagation()\n    \n    toggleLayers(filter)  \n    })\n}\n\n\n"],"sourceRoot":""}