---
TestStringField:
    template: "{{ wtforms_helpers.govukInput(form, 'string_field')}}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="string_field" name="string_field" type="text">
                - <label class="govuk-label" for="string_field">\s*StringField\s*</label>
        test_output_sanitized:
            request:
                method: post
                data:
                    string_field: <script>alert("Hello")</script>
            expected_output:
                - <input class="govuk-input govuk-input--error" id="string_field" name="string_field" type="text" value="&lt;script&gt;alert\(&#34;Hello&#34;\)&lt;/script&gt;" aria-describedby="string_field-error">
        test_valid_post:
            request:
                method: post
                data:
                    string_field: John Smith
            expected_output:
                - <input class="govuk-input" id="string_field" name="string_field" type="text" value="John Smith">
                - <label class="govuk-label" for="string_field">\s*StringField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    string_field: foo
            expected_output:
                - <input class="govuk-input govuk-input--error" id="string_field" name="string_field" type="text" value="foo" aria-describedby="string_field-error">
                - <label class="govuk-label" for="string_field">\s*StringField\s*</label>
                - <span id="string_field-error" class="govuk-error-message">\s*Example serverside error - type &#34;John Smith&#34; into this field to suppress it\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestEmailField:
    template: "{{ wtforms_helpers.govukInput(form, 'email_field', {'type': 'email', 'hint': {'text': 'This is a hint'}}) }}"
    tests:
        test_empty_get:
            expected_output:
                - <span id="email_field-hint" class="govuk-hint">\s*This is a hint\s*</span>
                - <label class="govuk-label" for="email_field">\s*Email address\s*</label>
                - <input class="govuk-input" id="email_field" name="email_field" type="email" aria-describedby="email_field-hint">
        test_valid_post:
            request:
                method: post
                data:
                    email_field: foo@bar.com
            expected_output:
                - <span id="email_field-hint" class="govuk-hint">\s*This is a hint\s*</span>
                - <label class="govuk-label" for="email_field">\s*Email address\s*</label>
                - <input class="govuk-input" id="email_field" name="email_field" type="email" value="foo@bar.com" aria-describedby="email_field-hint">
        test_invalid_post:
            request:
                method: post
                data:
                    email_field: foo
            expected_output:
                - <span id="email_field-error" class="govuk-error-message">\s*Invalid email address.\s*</span>
                - <span id="email_field-hint" class="govuk-hint">\s*This is a hint\s*</span>
                - <label class="govuk-label" for="email_field">\s*Email address\s*</label>
                - <input class="govuk-input govuk-input--error" id="email_field" name="email_field" type="email" value="foo" aria-describedby="email_field-hint email_field-error">
                - <div class="govuk-form-group govuk-form-group--error">

TestFloatField:
    template: "{{ wtforms_helpers.govukInput(form, 'float_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="float_field" name="float_field" type="text">
                - <label class="govuk-label" for="float_field">\s*FloatField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    float_field: 1.4
            expected_output:
                - <input class="govuk-input" id="float_field" name="float_field" type="text" value="1.4">
                - <label class="govuk-label" for="float_field">\s*FloatField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    float_field: foo
            expected_output:
                - <input class="govuk-input govuk-input--error" id="float_field" name="float_field" type="text" value="foo" aria-describedby="float_field-error">
                - <label class="govuk-label" for="float_field">\s*FloatField\s*</label>
                - <span id="float_field-error" class="govuk-error-message">\s*Not a valid float value\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestIntegerField:
    template: "{{ wtforms_helpers.govukInput(form, 'integer_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="integer_field" name="integer_field" type="text">
                - <label class="govuk-label" for="integer_field">\s*IntegerField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    integer_field: 1
            expected_output:
                - <input class="govuk-input" id="integer_field" name="integer_field" type="text" value="1">
                - <label class="govuk-label" for="integer_field">\s*IntegerField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    integer_field: 1.4
            expected_output:
                - <input class="govuk-input govuk-input--error" id="integer_field" name="integer_field" type="text" value="1.4" aria-describedby="integer_field-error">
                - <label class="govuk-label" for="integer_field">\s*IntegerField\s*</label>
                - <span id="integer_field-error" class="govuk-error-message">\s*Not a valid integer value\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestDecimalField:
    template: "{{ wtforms_helpers.govukInput(form, 'decimal_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="decimal_field" name="decimal_field" type="text">
                - <label class="govuk-label" for="decimal_field">\s*DecimalField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    decimal_field: 1.4
            expected_output:
                - <input class="govuk-input" id="decimal_field" name="decimal_field" type="text" value="1.4">
                - <label class="govuk-label" for="decimal_field">\s*DecimalField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    decimal_field: foo
            expected_output:
                - <input class="govuk-input govuk-input--error" id="decimal_field" name="decimal_field" type="text" value="foo" aria-describedby="decimal_field-error">
                - <label class="govuk-label" for="decimal_field">\s*DecimalField\s*</label>
                - <span id="decimal_field-error" class="govuk-error-message">\s*Not a valid float value\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestTextAreaField:
    template: "{{ wtforms_helpers.govukTextarea(form, 'textarea_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <textarea class="govuk-textarea" id="textarea_field" name="textarea_field" rows="5"></textarea>
                - <label class="govuk-label" for="textarea_field">\s*TextAreaField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    textarea_field: |
                        Foo
                        <p>Bar</p>
            expected_output:
                - <textarea class="govuk-textarea" id="textarea_field" name="textarea_field" rows="5">Foo\n&lt;p&gt;Bar&lt;/p&gt;\s*</textarea>
                - <label class="govuk-label" for="textarea_field">\s*TextAreaField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    something: else
            expected_output:
                - <textarea class="govuk-textarea govuk-textarea--error" id="textarea_field" name="textarea_field" rows="5" aria-describedby="textarea_field-error"></textarea>
                - <label class="govuk-label" for="textarea_field">\s*TextAreaField\s*</label>
                - <span id="textarea_field-error" class="govuk-error-message">\s*TextAreaField is required\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestBooleanField:
    template: "{{ wtforms_helpers.govukCheckboxes(form, 'boolean_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="boolean_field" name="boolean_field" type="checkbox" value="y">
                - <label class="govuk-label govuk-checkboxes__label" for="boolean_field">\s*BooleanField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    boolean_field: y
            expected_output:
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="boolean_field" name="boolean_field" type="checkbox" value="y" checked>
                - <label class="govuk-label govuk-checkboxes__label" for="boolean_field">\s*BooleanField\s*</label>
        test_invalid_post:
            request:
                method: post
            expected_output:
                - <span id="boolean_field-error" class="govuk-error-message">\s*Please tick the box\s*</span>
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="boolean_field" name="boolean_field" type="checkbox" value="y">
                - <label class="govuk-label govuk-checkboxes__label" for="boolean_field">\s*BooleanField\s*</label>

TestSelectMultipleField:
    template: "{{ wtforms_helpers.govukCheckboxes(form, 'select_multiple_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    select_multiple_field: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    select_multiple_field: foo
            expected_output:
                - foo

TestSelectField:
    template: "{{ wtforms_helpers.govukInput(form, 'select_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    select_field: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    select_field: foo
            expected_output:
                - foo

TestRadioField:
    template: "{{ wtforms_helpers.govukInput(form, 'radio_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    radio_field: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    radio_field: foo
            expected_output:
                - foo

TestFileField::
    template: "{{ wtforms_helpers.govukInput(form, 'file_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    file_field: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    file_field: foo
            expected_output:
                - foo

TestMultipleFieldField:
    template: "{{ wtforms_helpers.govukInput(form, 'multiple_file_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    multiple_file_field: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    multiple_file_field: foo
            expected_output:
                - foo

TestSubmitButton:
    template: "{{ wtforms_helpers.govukInput(form, 'submit_button') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    submit_button: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    submit_button: foo
            expected_output:
                - foo

TestPasswordField:
    template: "{{ wtforms_helpers.govukInput(form, 'password_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - foo
        test_valid_post:
            request:
                method: post
                data:
                    password_field: foo
            expected_output:
                - foo
        test_invalid_post:
            request:
                method: post
                data:
                    password_field: foo
            expected_output:
                - foo
