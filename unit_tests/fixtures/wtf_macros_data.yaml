---
TestStringField:
    template: "{{ wtforms_helpers.govukInput(form, 'string_field')}}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="string_field" name="string_field" type="text">
                - <label class="govuk-label" for="string_field">\s*StringField\s*</label>
        test_output_sanitized:
            request:
                method: post
                data:
                    string_field: <script>alert("Hello")</script>
            expected_output:
                - <input class="govuk-input govuk-input--error" id="string_field" name="string_field" type="text" value="&lt;script&gt;alert\(&#34;Hello&#34;\)&lt;/script&gt;" aria-describedby="string_field-error">
        test_valid_post:
            request:
                method: post
                data:
                    string_field: John Smith
            expected_output:
                - <input class="govuk-input" id="string_field" name="string_field" type="text" value="John Smith">
                - <label class="govuk-label" for="string_field">\s*StringField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    string_field: foo
            expected_output:
                - <input class="govuk-input govuk-input--error" id="string_field" name="string_field" type="text" value="foo" aria-describedby="string_field-error">
                - <label class="govuk-label" for="string_field">\s*StringField\s*</label>
                - <span id="string_field-error" class="govuk-error-message">\s*Example serverside error - type &#34;John Smith&#34; into this field to suppress it\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestEmailField:
    template: "{{ wtforms_helpers.govukInput(form, 'email_field', {'type': 'email', 'hint': {'text': 'This is a hint'}}) }}"
    tests:
        test_empty_get:
            expected_output:
                - <span id="email_field-hint" class="govuk-hint">\s*This is a hint\s*</span>
                - <label class="govuk-label" for="email_field">\s*Email address\s*</label>
                - <input class="govuk-input" id="email_field" name="email_field" type="email" aria-describedby="email_field-hint">
        test_valid_post:
            request:
                method: post
                data:
                    email_field: foo@bar.com
            expected_output:
                - <span id="email_field-hint" class="govuk-hint">\s*This is a hint\s*</span>
                - <label class="govuk-label" for="email_field">\s*Email address\s*</label>
                - <input class="govuk-input" id="email_field" name="email_field" type="email" value="foo@bar.com" aria-describedby="email_field-hint">
        test_invalid_post:
            request:
                method: post
                data:
                    email_field: foo
            expected_output:
                - <span id="email_field-error" class="govuk-error-message">\s*Invalid email address.\s*</span>
                - <span id="email_field-hint" class="govuk-hint">\s*This is a hint\s*</span>
                - <label class="govuk-label" for="email_field">\s*Email address\s*</label>
                - <input class="govuk-input govuk-input--error" id="email_field" name="email_field" type="email" value="foo" aria-describedby="email_field-hint email_field-error">
                - <div class="govuk-form-group govuk-form-group--error">

TestFloatField:
    template: "{{ wtforms_helpers.govukInput(form, 'float_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="float_field" name="float_field" type="text">
                - <label class="govuk-label" for="float_field">\s*FloatField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    float_field: 1.4
            expected_output:
                - <input class="govuk-input" id="float_field" name="float_field" type="text" value="1.4">
                - <label class="govuk-label" for="float_field">\s*FloatField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    float_field: foo
            expected_output:
                - <input class="govuk-input govuk-input--error" id="float_field" name="float_field" type="text" value="foo" aria-describedby="float_field-error">
                - <label class="govuk-label" for="float_field">\s*FloatField\s*</label>
                - <span id="float_field-error" class="govuk-error-message">\s*Not a valid float value\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestIntegerField:
    template: "{{ wtforms_helpers.govukInput(form, 'integer_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="integer_field" name="integer_field" type="text">
                - <label class="govuk-label" for="integer_field">\s*IntegerField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    integer_field: 1
            expected_output:
                - <input class="govuk-input" id="integer_field" name="integer_field" type="text" value="1">
                - <label class="govuk-label" for="integer_field">\s*IntegerField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    integer_field: 1.4
            expected_output:
                - <input class="govuk-input govuk-input--error" id="integer_field" name="integer_field" type="text" value="1.4" aria-describedby="integer_field-error">
                - <label class="govuk-label" for="integer_field">\s*IntegerField\s*</label>
                - <span id="integer_field-error" class="govuk-error-message">\s*Not a valid integer value\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestDecimalField:
    template: "{{ wtforms_helpers.govukInput(form, 'decimal_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <input class="govuk-input" id="decimal_field" name="decimal_field" type="text">
                - <label class="govuk-label" for="decimal_field">\s*DecimalField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    decimal_field: 1.4
            expected_output:
                - <input class="govuk-input" id="decimal_field" name="decimal_field" type="text" value="1.4">
                - <label class="govuk-label" for="decimal_field">\s*DecimalField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    decimal_field: foo
            expected_output:
                - <input class="govuk-input govuk-input--error" id="decimal_field" name="decimal_field" type="text" value="foo" aria-describedby="decimal_field-error">
                - <label class="govuk-label" for="decimal_field">\s*DecimalField\s*</label>
                - <span id="decimal_field-error" class="govuk-error-message">\s*Not a valid float value\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestTextAreaField:
    template: "{{ wtforms_helpers.govukTextarea(form, 'textarea_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <textarea class="govuk-textarea" id="textarea_field" name="textarea_field" rows="5"></textarea>
                - <label class="govuk-label" for="textarea_field">\s*TextAreaField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    textarea_field: |
                        Foo
                        <p>Bar</p>
            expected_output:
                - <textarea class="govuk-textarea" id="textarea_field" name="textarea_field" rows="5">Foo\n&lt;p&gt;Bar&lt;/p&gt;\s*</textarea>
                - <label class="govuk-label" for="textarea_field">\s*TextAreaField\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    something: else
            expected_output:
                - <textarea class="govuk-textarea govuk-textarea--error" id="textarea_field" name="textarea_field" rows="5" aria-describedby="textarea_field-error"></textarea>
                - <label class="govuk-label" for="textarea_field">\s*TextAreaField\s*</label>
                - <span id="textarea_field-error" class="govuk-error-message">\s*TextAreaField is required\s*</span>
                - <div class="govuk-form-group govuk-form-group--error">

TestBooleanField:
    template: "{{ wtforms_helpers.govukCheckboxes(form, 'boolean_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="boolean_field" name="boolean_field" type="checkbox" value="y">
                - <label class="govuk-label govuk-checkboxes__label" for="boolean_field">\s*BooleanField\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    boolean_field: y
            expected_output:
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="boolean_field" name="boolean_field" type="checkbox" value="y" checked>
                - <label class="govuk-label govuk-checkboxes__label" for="boolean_field">\s*BooleanField\s*</label>
        test_invalid_post:
            request:
                method: post
            expected_output:
                - <span id="boolean_field-error" class="govuk-error-message">\s*Please tick the box\s*</span>
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="boolean_field" name="boolean_field" type="checkbox" value="y">
                - <label class="govuk-label govuk-checkboxes__label" for="boolean_field">\s*BooleanField\s*</label>

TestSelectMultipleField:
    template: "{{ wtforms_helpers.govukCheckboxes(form, 'select_multiple_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="select_multiple_field-0" name="select_multiple_field" type="checkbox" value="one">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-0">\s*One\s*</label>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-1" name="select_multiple_field" type="checkbox" value="two">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-1">\s*Two\s*</label>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-2" name="select_multiple_field" type="checkbox" value="three">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-2">\s*Three\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    select_multiple_field:
                        - one
                        - two
            expected_output:
                - <div class="govuk-checkboxes">
                - <div class="govuk-checkboxes__item">
                - <input class="govuk-checkboxes__input" id="select_multiple_field-0" name="select_multiple_field" type="checkbox" value="one" checked>
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-0">\s*One\s*</label>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-1" name="select_multiple_field" type="checkbox" value="two" checked>
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-1">\s*Two\s*</label>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-2" name="select_multiple_field" type="checkbox" value="three">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-2">\s*Three\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    select_multiple_field: foo
            expected_output:
                - <div class="govuk-form-group govuk-form-group--error">
                - <span id="select_multiple_field-error" class="govuk-error-message">\s*&#39;foo&#39; is not a valid choice for this field\s*</span>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-0" name="select_multiple_field" type="checkbox" value="one">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-0">\s*One\s*</label>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-1" name="select_multiple_field" type="checkbox" value="two">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-1">\s*Two\s*</label>
                - <input class="govuk-checkboxes__input" id="select_multiple_field-2" name="select_multiple_field" type="checkbox" value="three">
                - <label class="govuk-label govuk-checkboxes__label" for="select_multiple_field-2">\s*Three\s*</label>


TestSelectField:
    template: "{{ wtforms_helpers.govukSelect(form, 'select_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-form-group">
                - <label class="govuk-label" for="select_field">\s*SelectField\s*</label>
                - <select class="govuk-select" id="select_field" name="select_field">
                - <option value="" selected>Please select</option>
                - <option value="one">One</option>
                - <option value="two">Two</option>
                - <option value="three">Three</option>
        test_valid_post:
            request:
                method: post
                data:
                    select_field: one
            expected_output:
                - <div class="govuk-form-group">
                - <label class="govuk-label" for="select_field">\s*SelectField\s*</label>
                - <select class="govuk-select" id="select_field" name="select_field">
                - <option value="">Please select</option>
                - <option value="one" selected>One</option>
                - <option value="two">Two</option>
                - <option value="three">Three</option>
        test_invalid_post:
            request:
                method: post
                data:
                    select_field: foo
            expected_output:
                - <div class="govuk-form-group govuk-form-group--error">
                - <label class="govuk-label" for="select_field">\s*SelectField\s*</label>
                - <select class="govuk-select govuk-select--error" id="select_field" name="select_field" aria-describedby="select_field-error">
                - <span id="select_field-error" class="govuk-error-message">\s*Not a valid choice\s*</span>
                - <option value="" selected>Please select</option>
                - <option value="one">One</option>
                - <option value="two">Two</option>
                - <option value="three">Three</option>

TestRadioField:
    template: "{{ wtforms_helpers.govukRadios(form, 'radio_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-form-group">
                - <div class="govuk-radios">
                - <div class="govuk-radios__item">
                - <input class="govuk-radios__input" id="radio_field-0" name="radio_field" type="radio" value="one">
                - <label class="govuk-label govuk-radios__label" for="radio_field-0">\s*One\s*</label>
                - <input class="govuk-radios__input" id="radio_field-1" name="radio_field" type="radio" value="two">
                - label class="govuk-label govuk-radios__label" for="radio_field-1">\s*Two\s*</label>
                - <input class="govuk-radios__input" id="radio_field-2" name="radio_field" type="radio" value="three">
                - <label class="govuk-label govuk-radios__label" for="radio_field-2">\s*Three\s*</label>
        test_valid_post:
            request:
                method: post
                data:
                    radio_field: two
            expected_output:
                - <div class="govuk-form-group">
                - <div class="govuk-radios">
                - <div class="govuk-radios__item">
                - <input class="govuk-radios__input" id="radio_field-0" name="radio_field" type="radio" value="one">
                - <label class="govuk-label govuk-radios__label" for="radio_field-0">\s*One\s*</label>
                - <input class="govuk-radios__input" id="radio_field-1" name="radio_field" type="radio" value="two" checked>
                - label class="govuk-label govuk-radios__label" for="radio_field-1">\s*Two\s*</label>
                - <input class="govuk-radios__input" id="radio_field-2" name="radio_field" type="radio" value="three">
                - <label class="govuk-label govuk-radios__label" for="radio_field-2">\s*Three\s*</label>
        test_invalid_post:
            request:
                method: post
                data:
                    radio_field: foo
            expected_output:
                - <div class="govuk-form-group govuk-form-group--error">
                - <span id="radio_field-error" class="govuk-error-message">\s*Not a valid choice\s*</span>
                - <div class="govuk-radios">
                - <div class="govuk-radios__item">
                - <input class="govuk-radios__input" id="radio_field-0" name="radio_field" type="radio" value="one">
                - <label class="govuk-label govuk-radios__label" for="radio_field-0">\s*One\s*</label>
                - <input class="govuk-radios__input" id="radio_field-1" name="radio_field" type="radio" value="two">
                - label class="govuk-label govuk-radios__label" for="radio_field-1">\s*Two\s*</label>
                - <input class="govuk-radios__input" id="radio_field-2" name="radio_field" type="radio" value="three">
                - <label class="govuk-label govuk-radios__label" for="radio_field-2">\s*Three\s*</label>

TestFileField:
    template: "{{ wtforms_helpers.govukFileUpload(form, 'file_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-form-group">
                - <label class="govuk-label" for="file_field">\s*FileField\s*</label>
                - <input class="govuk-file-upload" id="file_field" name="file_field" type="file">

TestMultipleFieldField:
    template: "{{ wtforms_helpers.govukFileUpload(form, 'multiple_file_field') }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-form-group">
                - <label class="govuk-label" for="file_field">\s*FileField\s*</label>
                - <input class="govuk-file-upload" id="file_field" name="file_field" type="file" multiple>

TestSubmitButton:
    template: "{{ wtforms_helpers.govukButton(form, 'submit_button') }}"
    tests:
        test_empty_get:
            expected_output:
                - <button value="y" name="submit_button" type="submit" class="govuk-button">

TestPasswordField:
    template: "{{ wtforms_helpers.govukInput(form, 'password_field', {'type': 'password'}) }}"
    tests:
        test_empty_get:
            expected_output:
                - <div class="govuk-form-group">
                - <label class="govuk-label" for="password_field">\s*PasswordField\s*</label>
                - <input class="govuk-input" id="password_field" name="password_field" type="password">
        test_valid_post:
            request:
                method: post
                data:
                    password_field: foo
                    password_retype_field: foo
            expected_output:
                - <div class="govuk-form-group">
                - <label class="govuk-label" for="password_field">\s*PasswordField\s*</label>
                # Ensure that passwords are not represented in the output for security reasons
                - <input class="govuk-input" id="password_field" name="password_field" type="password">
        test_invalid_post:
            request:
                method: post
                data:
                    password_field: foo
                    password_retype_field: bar
            expected_output:
                - <div class="govuk-form-group govuk-form-group--error">
                - <label class="govuk-label" for="password_field">\s*PasswordField\s*</label>
                - <span id="password_field-error" class="govuk-error-message">\s*Please ensure both password fields match\s*</span>
                # Ensure that passwords are not represented in the output for security reasons
                - <input class="govuk-input govuk-input--error" id="password_field" name="password_field" type="password" aria-describedby="password_field-error">
