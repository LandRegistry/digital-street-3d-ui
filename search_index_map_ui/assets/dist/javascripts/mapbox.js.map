{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./search_index_map_ui/assets/src/javascripts/mapbox.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","mapboxgl","accessToken","map","Map","style","center","zoom","pitch","bearing","container","antialias","buildingHeightSourceLayer","floorplanLayers","layer","sourceLayer","spatialUnitsDiv","document","getElementById","spatialUnits","JSON","parse","innerHTML","toggleLayers","filter","includes","getLayoutProperty","setLayoutProperty","this","className","on","buildingIdsWithFloorplans","features","querySourceFeatures","j","properties","fid","push","buildingFilter","concat","buildingFeatures","setFeatureState","id","source","hide","displayFloorplan","titleInformationOverlay","buildingId","baseHeight","extrusionHeight","mapData","getSource","console","log","floorHeight","RelHmax","num_floors","floor","setPaintProperty","validate","highlightTitle","featureId","titleFeatureIds","titleNumber","featureIds","getFeatureIdsByTitleNumber","getSpatialUnitById","k","highlight","find","element","display","e","removeFeatureState","disableHighlightTitle","layers","queryRenderedFeatures","point","length","currentFeature","spatialUnit","BAUnits","BAUnit","currentBAUnit","title","address","pricePaid","rights","restrictions","responsibilities","currentPricePaid","amount","date","right","currentRight","newRight","rightId","type","description","mortgages","mortgage","partyId","currentMortgage","newMortgage","interestRate","restriction","currentRestriction","newRestriction","responsibility","currentResponsibility","newResponsibility","createElement","textContent","appendChild","addressDiv","addressLabel","append","addressText","pricesPaidDiv","pricesPaidLabel","pricePaidDiv","pricePaidDateLabel","pricePaidDateText","pricePaidAmountLabel","pricePaidAmountText","rightsDiv","rightsLabel","rightDiv","rightTypeLabel","rightTypeText","rightDescriptionLabel","rightDescriptionText","partyLabel","partyDiv","partyNameLabel","partyNameText","partyTypeLabel","partyTypeText","restrictionsDiv","restrictionsLabel","restrictionDiv","restrictionTypeLabel","restrictionTypeText","restrictionDescriptionLabel","restrictionDescriptionText","responsibilitiesDiv","responsibilitiesLabel","responsibilityDiv","responsibilityTypeLabel","responsibilityTypeText","responsibilityDescriptionLabel","responsibilityDescriptionText","filterCheckboxes","getElementsByName","addEventListener","target","preventDefault","stopPropagation"],"mappings":"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","file":"mapbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","mapboxgl.accessToken = 'pk.eyJ1IjoibWF0dGdpcmRsZXIiLCJhIjoiY2lteW85cm5lMDBmcnY5bTFxY2Zsc3c2OCJ9.VvO2DhAhOVrcjJ0Usw8JIA'\n    let map = new mapboxgl.Map({\n    style: 'mapbox://styles/mattgirdler/cjznu3ztu06m31clp2j37yybz',\n    center:[-3.5208657, 50.7227184],\n    zoom: 17.5,\n    pitch: 45,\n    bearing: -17.6,\n    container: 'map',\n    antialias: true\n})\n\nconst buildingHeightSourceLayer = \"exeter_buildings_with_height-0ygi87\"\nconst floorplanLayers = [\n    // {layer: 'princesshay-level-gf-leasehold', sourceLayer: 'princesshay-level-gf-8yagcd'},\n    // {layer: 'princesshay-level-gf-freehold', sourceLayer: 'princesshay-level-gf-8yagcd'},\n    // {layer: 'princesshay-level-1-leasehold', sourceLayer: 'princesshay-level-1-90cnib'},\n    // {layer: 'princesshay-level-1-freehold', sourceLayer: 'princesshay-level-1-90cnib'},\n    {layer: 'airspace-leasehold-a6g827', sourceLayer: 'airspace-a6g827'},\n    {layer: 'freehold-diumk5', sourceLayer: 'osgb1000012317615-freehold-diumk5'},\n    {layer: 'leasehold-0-83okhj', sourceLayer: 'osgb1000012317615-0-83okhj'},\n    {layer: 'leasehold-1-54g9gf', sourceLayer: 'osgb1000012317615-1-54g9gf'},\n    {layer: 'leasehold-2-ccs62k', sourceLayer: 'osgb1000012317615-2-ccs62k'},\n    {layer: 'leasehold-3-8aah9q', sourceLayer: 'osgb1000012317615-3-8aah9q'}\n]\n\nconst spatialUnitsDiv = document.getElementById('spatial-units')\nconst spatialUnits = JSON.parse(spatialUnitsDiv.innerHTML)[0]\n\nmap.on('load', function() {\n\n    // Create array of building IDs with boundary/floorplan data\n    const buildingIdsWithFloorplans = []\n    for (let i in floorplanLayers) {\n        // Ignore airspace layers\n        if (!floorplanLayers[i].layer.includes('airspace')) {\n            const features = map.querySourceFeatures('composite', {\n                sourceLayer: floorplanLayers[i].sourceLayer,\n            })\n            for (let j in features) {\n                if (!buildingIdsWithFloorplans.includes(features[j].properties.fid)) {\n                    buildingIdsWithFloorplans.push(features[j].properties.fid)\n                }\n            }\n        }\n    }\n\n    // Hide any buildings that have boundary/floorplan data \n    let buildingFilter = [\"in\", \"fid\"].concat(buildingIdsWithFloorplans)\n    const buildingFeatures = map.querySourceFeatures('composite', {\n        sourceLayer: buildingHeightSourceLayer,\n        filter: buildingFilter\n    })\n    for (let i in buildingFeatures) {\n        map.setFeatureState({id: buildingFeatures[i].id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, {'hide': true})\n        displayFloorplan(buildingFeatures[i].properties.fid)\n    }\n\n    // Create an overlay\n    let titleInformationOverlay = document.getElementById('title-information-overlay')\n    let toggleLayersOverlay = document.getElementById('toggle-layers-overlay')\n    toggleLayersOverlay.style.display = 'block'\n\n    // Display features after hiding the building geometry\n    function displayFloorplan(buildingId) {\n        for (let i in floorplanLayers) {\n            map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'visible')\n\n            // Don't worry about extruding the airspace layer, this is extruded by default\n            if (!floorplanLayers[i].layer.includes('airspace')) {\n                // Get the features within the layer\n                const features = map.querySourceFeatures('composite', {\n                    sourceLayer: floorplanLayers[i].sourceLayer\n                })\n\n                for (let j in features) {\n                    let baseHeight = 0\n                    let extrusionHeight = 0\n\n                    if (floorplanLayers[i].layer.includes('freehold')) {\n                        extrusionHeight = 120\n\n                        // Add a buffer to the freehold to avoid clipping\n                        let mapData = map.getSource('osgb1000012317615-freehold-diumk5')\n                        // let realCoordinates = features[j].geometry\n                        console.log(mapData)\n                        // let realGeometry = mapData.features[j].geometry\n                        // let geometryWithBuffer = turf.simplify(turf.buffer(realGeometry, '2', {units: 'meters'}), {tolerance: 0.005})\n                        // console.log(realGeometry)\n                        // console.log(geometryWithBuffer)\n                        // mapData.features[j].geometry = coordinatesWithBuffer\n                        // map.getSource(floorplanLayers[i].layer)\n\n                    } else {\n                        const buildingId = features[j].properties.fid\n                        // Get building height from OS dataset\n                        const buildingFeature = map.querySourceFeatures('composite', {\n                            sourceLayer: buildingHeightSourceLayer,\n                            filter: [\"==\", 'fid', buildingId]\n                        })[0]\n                        const buildingHeight = buildingFeature.properties.RelHmax \n    \n                        // Generate feature height values based on building height\n                        const floorHeight = buildingHeight / features[j].properties.num_floors\n                        extrusionHeight = floorHeight * (features[j].properties.floor + 1)\n                        baseHeight = floorHeight*features[j].properties.floor\n                    }\n\n                    // Extrude the features\n                    map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', extrusionHeight, {validate: true})\n                    map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-base', baseHeight, {validate: true})\n                }\n            } \n        }\n    }\n\n    function hideFloorplan(buildingId) {\n        for (let i in floorplanLayers) {\n            const features = map.querySourceFeatures('composite', {\n                sourceLayer: floorplanLayers[i].sourceLayer, \n                filter: [\"==\", 'fid', buildingId]\n            })\n            if (features.length > 0) {\n                map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-base', 0, {validate: true})\n                map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', 0, {validate: true})\n            }\n        }\n    }\n\n    function highlightTitle(featureId) {\n\n        let spatialUnit = getSpatialUnitById(featureId)\n        let spatialUnitTitleNumber = spatialUnit['ba_units'][0]['name']\n        let titleFeatureIds = getFeatureIdsByTitleNumber(spatialUnitTitleNumber)\n\n        for (let i in floorplanLayers) {\n            for (let j in titleFeatureIds) {\n                const features = map.querySourceFeatures('composite', { \n                    sourceLayer: floorplanLayers[i].sourceLayer,\n                    filter: ['==', 'id', titleFeatureIds[j]] \n                })\n\n                for (let k in features) {\n                    map.setFeatureState({id: features[k].id, source: 'composite', sourceLayer: floorplanLayers[i].sourceLayer}, {'highlight': true})\n                }\n            }\n        }\n    }\n\n    function disableHighlightTitle() {\n        for (let i in floorplanLayers) {\n            titleInformationOverlay.style.display = 'none'\n            map.removeFeatureState({source: 'composite', sourceLayer: floorplanLayers[i].sourceLayer})\n        }\n    }\n\n    function getFeatureIdsByTitleNumber(titleNumber) {\n        let featureIds = []\n        for (let i in spatialUnits) {\n            if (spatialUnits[i]['ba_units'][0]['name'] == titleNumber) {\n                featureIds.push(spatialUnits[i]['id'])\n            }\n        }\n        return featureIds\n    }\n\n    function getSpatialUnitById(featureId) {\n        let result = spatialUnits.find(function(element) {\n            return element.id == featureId\n        })\n        return result\n    }\n\n    // Toggle building polygons on/off\n    // map.on('click', 'exeter-buildings-with-height', function (e) {\n    //     const features = map.queryRenderedFeatures(e.point)\n    //     const feature = features[0]\n    //     if (map.getFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}).hide) {\n    //         hideFloorplan(feature.properties.fid)\n    //         map.removeFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, 'hide')\n    //     } else {\n    //         map.setFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, {'hide': true})\n    //         displayFloorplan(feature.properties.fid)\n    //     }\n    // })\n\n    // Display title information from floorplans\n    map.on('mousemove', function(e) {\n\n        disableHighlightTitle()\n\n        // Create array of floorplan style layers for filtering\n        const layers = []\n        for (let i in floorplanLayers) {\n            layers.push(floorplanLayers[i].layer)\n        }\n\n        // Check if mouseover is on a floorplan layer\n        const features = map.queryRenderedFeatures(e.point, { layers: layers })\n        if (features.length > 0) {\n            const currentFeature = features[0]\n\n            highlightTitle(currentFeature.properties.id)\n            \n            let featureId = currentFeature.properties.id\n\n            let spatialUnit = getSpatialUnitById(featureId)\n\n            let BAUnits = []\n\n            if (spatialUnit) {\n                \n                for (let BAUnit in spatialUnit['ba_units']) {\n                    let currentBAUnit = spatialUnit['ba_units'][BAUnit]\n\n                    let title = { \n                        address: spatialUnit['address'],\n                        titleNumber: currentBAUnit['name'],\n                        pricePaid: [],\n                        rights: [],\n                        restrictions: [],\n                        responsibilities: []\n                    }\n\n                    // Prices Paid\n                    for (let pricePaid in spatialUnit['price_paid']) {\n                        let currentPricePaid = spatialUnit['price_paid'][pricePaid]\n                        title['pricePaid'].push({\n                            amount: currentPricePaid['amount'],\n                            date: currentPricePaid['date']\n                        })\n                    }\n\n                    // Rights\n                    for (let right in currentBAUnit['rights']) {\n                        let currentRight = currentBAUnit['rights'][right]\n                        let newRight = {\n                        rightId: currentRight['right_id'],\n                        type: currentRight['type'],\n                        description: currentRight['description'],\n                        mortgages: []\n                        }\n\n                        if (currentRight['party']) {\n                        newRight['party'] = {\n                            name: currentRight['party']['name'],\n                            type: currentRight['party']['type'],\n                            partyId: currentRight['party']\n                        }\n                        }\n\n                        for (let mortgage in currentRight['mortgages']) {\n                        let currentMortgage = currentRight['mortgages'][mortgage]\n                        let newMortgage = {\n                            type: currentMortgage['type'],\n                            amount: currentMortgage['amount'],\n                            interestRate: currentMortgage['interest_rate']\n                        }\n                        newRight['mortgages'].push(newMortgage)\n                        } \n                        title['rights'].push(newRight)\n                    }\n\n                    // Add restrictions\n                    for (let restriction in currentBAUnit['restrictions']) {\n                        let currentRestriction = currentBAUnit['restrictions'][restriction]\n                        let newRestriction = {\n                        type: currentRestriction['type'],\n                        description: currentRestriction['description']\n                        }\n\n                        if (currentRestriction['party']) {\n                        newRestriction['party'] = {\n                            name: currentRestriction['party']['name'],\n                            type: currentRestriction['party']['type'],\n                            partyId: currentRestriction['party']\n                        }\n                        }\n                        title['restrictions'].push(newRestriction)\n                    }\n\n                    // Add responsibilities\n                    for (let responsibility in currentBAUnit['responsibilities']) {\n                        let currentResponsibility = currentBAUnit['responsibilities'][responsibility]\n                        let newResponsibility = {\n                        type: currentResponsibility['type'],\n                        description: currentResponsibility['description']\n                        }\n\n                        if (currentResponsibility['party']) {\n                        newResponsibility['party'] = {\n                            name: currentResponsibility['party']['name'],\n                            type: currentResponsibility['party']['type'],\n                            partyId: currentResponsibility['party']\n                        }\n                        }\n                        title['responsibilities'].push(newResponsibility)\n                    }\n                    BAUnits.push(title)\n                }\n            } \n\n            // Create HTML for title details \n            titleInformationOverlay.innerHTML = ''\n\n            // titleInformationOverlay.innerHTML = JSON.stringify(spatialUnit)\n            let titleNumber = document.createElement('strong')\n            titleNumber.textContent = BAUnits[0]['titleNumber']\n            titleInformationOverlay.appendChild(titleNumber)\n            \n            // Address data\n            if (BAUnits[0]['address']) {\n                let addressDiv = document.createElement('div')\n                let addressLabel = document.createElement('strong')\n                addressLabel.textContent = 'Address: '\n                addressDiv.append(addressLabel)\n    \n                let addressText = document.createElement('span')\n                addressText.textContent = BAUnits[0]['address']\n                addressDiv.append(addressText)\n                titleInformationOverlay.appendChild(addressDiv)\n            }\n\n            titleInformationOverlay.appendChild(document.createElement('hr'))\n\n            // Price Paid data\n            let pricesPaidDiv = document.createElement('div')\n            if (BAUnits[0]['pricePaid'].length > 0) {\n                let pricesPaidLabel = document.createElement('strong')\n                pricesPaidLabel.textContent = 'Prices Paid:'\n                pricesPaidDiv.appendChild(pricesPaidLabel)\n\n                for (let pricePaid in BAUnits[0]['pricePaid']) {\n                    let pricePaidDiv = document.createElement('div')\n                    pricePaidDiv.style = \"margin-left: 10px;\"\n\n                    if (pricePaid > 0) {\n                        pricePaidDiv.appendChild(document.createElement('hr'))\n                    }\n\n                    // Price Paid date\n                    let pricePaidDateLabel = document.createElement('strong')\n                    pricePaidDateLabel.textContent = 'Date: '\n                    pricePaidDiv.appendChild(pricePaidDateLabel)\n\n                    let pricePaidDateText = document.createElement('span')\n                    pricePaidDateText.textContent = BAUnits[0]['pricePaid'][pricePaid]['date']\n                    pricePaidDiv.appendChild(pricePaidDateText)\n                    pricePaidDiv.appendChild(document.createElement('br'))\n\n                    // Price Paid amount\n                    let pricePaidAmountLabel = document.createElement('strong')\n                    pricePaidAmountLabel.textContent = 'Amount: '\n                    pricePaidDiv.appendChild(pricePaidAmountLabel)\n\n                    let pricePaidAmountText = document.createElement('span')\n                    pricePaidAmountText.textContent = BAUnits[0]['pricePaid'][pricePaid]['amount']\n                    pricePaidDiv.appendChild(pricePaidAmountText)\n                    pricePaidDiv.appendChild(document.createElement('br'))\n\n                    pricesPaidDiv.appendChild(pricePaidDiv)\n                }\n                titleInformationOverlay.appendChild(pricesPaidDiv)\n                titleInformationOverlay.appendChild(document.createElement('hr'))\n            }\n\n            // Rights data\n            let rightsDiv = document.createElement('div')\n            if (BAUnits[0]['rights'].length > 0) {\n                let rightsLabel = document.createElement('strong')\n                rightsLabel.textContent = 'Rights:'\n                rightsDiv.appendChild(rightsLabel)\n                for (let right in BAUnits[0]['rights']) {\n                    let rightDiv = document.createElement('div')\n                    rightDiv.style = \"margin-left: 10px;\"\n\n                    // Right Type\n                    let rightTypeLabel  = document.createElement('strong')\n                    rightTypeLabel.textContent = 'Type: '\n                    rightDiv.appendChild(rightTypeLabel)\n\n                    let rightTypeText = document.createElement('span')\n                    rightTypeText.textContent = BAUnits[0]['rights'][right]['type']\n                    rightDiv.appendChild(rightTypeText)\n                    rightDiv.appendChild(document.createElement('br'))\n\n                    // Right description\n                    if (BAUnits[0]['rights'][right]['description']) {\n                        let rightDescriptionLabel  = document.createElement('strong')\n                        rightDescriptionLabel.textContent = 'Description: '\n                        rightDiv.appendChild(rightDescriptionLabel)\n\n                        let rightDescriptionText = document.createElement('span')\n                        rightDescriptionText.textContent = BAUnits[0]['rights'][right]['description']\n                        rightDiv.appendChild(rightDescriptionText)\n                        rightDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // Right Party\n                    let partyLabel  = document.createElement('strong')\n                    partyLabel.textContent = 'Party: '\n                    rightDiv.appendChild(partyLabel)\n\n                    let partyDiv = document.createElement('div')\n                    partyDiv.style = \"margin-left: 10px;\"\n\n                    //// Party name\n                    let partyNameLabel  = document.createElement('strong')\n                    partyNameLabel.textContent = 'Name: '\n                    partyDiv.appendChild(partyNameLabel)\n\n                    let partyNameText = document.createElement('span')\n                    partyNameText.textContent = BAUnits[0]['rights'][right]['party']['name']\n                    partyDiv.appendChild(partyNameText)\n                    partyDiv.appendChild(document.createElement('br'))\n\n                    //// Party type\n                    let partyTypeLabel  = document.createElement('strong')\n                    partyTypeLabel.textContent = 'Type: '\n                    partyDiv.appendChild(partyTypeLabel)\n\n                    let partyTypeText = document.createElement('span')\n                    partyTypeText.textContent = BAUnits[0]['rights'][right]['party']['type']\n                    partyDiv.appendChild(partyTypeText)\n                    partyDiv.appendChild(document.createElement('br'))\n\n                    rightDiv.appendChild(partyDiv)\n                    rightDiv.appendChild(document.createElement('hr'))\n\n                    rightsDiv.appendChild(rightDiv)\n                }\n                titleInformationOverlay.appendChild(rightsDiv)\n            }\n\n            // Restrictions data\n            let restrictionsDiv = document.createElement('div')\n            if (BAUnits[0]['restrictions'].length > 0) {\n                let restrictionsLabel = document.createElement('strong')\n                restrictionsLabel.textContent = 'Restrictions:'\n                restrictionsDiv.appendChild(restrictionsLabel)\n                for (restriction in BAUnits[0]['restrictions']) {\n                    let restrictionDiv = document.createElement('div')\n                    restrictionDiv.style = \"margin-left: 10px;\"\n\n                    // Restriction Type\n                    let restrictionTypeLabel  = document.createElement('strong')\n                    restrictionTypeLabel.textContent = 'Type: '\n                    restrictionDiv.appendChild(restrictionTypeLabel)\n\n                    let restrictionTypeText = document.createElement('span')\n                    restrictionTypeText.textContent = BAUnits[0]['restrictions'][restriction]['type']\n                    restrictionDiv.appendChild(restrictionTypeText)\n                    restrictionDiv.appendChild(document.createElement('br'))\n\n                    // Restriction description\n                    if (BAUnits[0]['restrictions'][restriction]['description']) {\n                        let restrictionDescriptionLabel  = document.createElement('strong')\n                        restrictionDescriptionLabel.textContent = 'Description: '\n                        restrictionDiv.appendChild(restrictionDescriptionLabel)\n\n                        let restrictionDescriptionText = document.createElement('span')\n                        restrictionDescriptionText.textContent = BAUnits[0]['restrictions'][restriction]['description']\n                        restrictionDiv.appendChild(restrictionDescriptionText)\n                        restrictionDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // Restriction Party\n                    let partyLabel  = document.createElement('strong')\n                    partyLabel.textContent = 'Party: '\n                    restrictionDiv.appendChild(partyLabel)\n\n                    let partyDiv = document.createElement('div')\n                    partyDiv.style = \"margin-left: 10px;\"\n\n                    //// Party name\n                    let partyNameLabel  = document.createElement('strong')\n                    partyNameLabel.textContent = 'Name: '\n                    partyDiv.appendChild(partyNameLabel)\n\n                    let partyNameText = document.createElement('span')\n                    partyNameText.textContent = BAUnits[0]['restrictions'][restriction]['party']['name']\n                    partyDiv.appendChild(partyNameText)\n                    partyDiv.appendChild(document.createElement('br'))\n\n                    //// Party type\n                    let partyTypeLabel  = document.createElement('strong')\n                    partyTypeLabel.textContent = 'Type: '\n                    partyDiv.appendChild(partyTypeLabel)\n\n                    let partyTypeText = document.createElement('span')\n                    partyTypeText.textContent = BAUnits[0]['restrictions'][restriction]['party']['type']\n                    partyDiv.appendChild(partyTypeText)\n                    partyDiv.appendChild(document.createElement('br'))\n\n                    restrictionDiv.appendChild(partyDiv)\n                    restrictionDiv.appendChild(document.createElement('hr'))\n\n                    restrictionsDiv.appendChild(restrictionDiv)\n                }\n                titleInformationOverlay.appendChild(restrictionsDiv)\n            }\n\n            // Responsibilities data\n            let responsibilitiesDiv = document.createElement('div')\n            if (BAUnits[0]['responsibilities'].length > 0) {\n                let responsibilitiesLabel = document.createElement('strong')\n                responsibilitiesLabel.textContent = 'Responsibilities:'\n                responsibilitiesDiv.appendChild(responsibilitiesLabel)\n                for (responsibility in BAUnits[0]['responsibilities']) {\n                    let responsibilityDiv = document.createElement('div')\n                    responsibilityDiv.style = \"margin-left: 10px;\"\n\n                    // Responsibility Type\n                    let responsibilityTypeLabel  = document.createElement('strong')\n                    responsibilityTypeLabel.textContent = 'Type: '\n                    responsibilityDiv.appendChild(responsibilityTypeLabel)\n\n                    let responsibilityTypeText = document.createElement('span')\n                    responsibilityTypeText.textContent = BAUnits[0]['responsibilities'][responsibility]['type']\n                    responsibilityDiv.appendChild(responsibilityTypeText)\n                    responsibilityDiv.appendChild(document.createElement('br'))\n\n                    // Responsibility description\n                    if (BAUnits[0]['responsibilities'][responsibility]['description']) {\n                        let responsibilityDescriptionLabel  = document.createElement('strong')\n                        responsibilityDescriptionLabel.textContent = 'Description: '\n                        responsibilityDiv.appendChild(responsibilityDescriptionLabel)\n\n                        let responsibilityDescriptionText = document.createElement('span')\n                        responsibilityDescriptionText.textContent = BAUnits[0]['responsibilities'][responsibility]['description']\n                        responsibilityDiv.appendChild(responsibilityDescriptionText)\n                        responsibilityDiv.appendChild(document.createElement('br'))\n                    }\n\n                    // Responsibility Party\n                    let partyLabel  = document.createElement('strong')\n                    partyLabel.textContent = 'Party: '\n                    responsibilityDiv.appendChild(partyLabel)\n\n                    let partyDiv = document.createElement('div')\n                    partyDiv.style = \"margin-left: 10px;\"\n\n                    //// Party name\n                    let partyNameLabel  = document.createElement('strong')\n                    partyNameLabel.textContent = 'Name: '\n                    partyDiv.appendChild(partyNameLabel)\n\n                    let partyNameText = document.createElement('span')\n                    partyNameText.textContent = BAUnits[0]['responsibilities'][responsibility]['party']['name']\n                    partyDiv.appendChild(partyNameText)\n                    partyDiv.appendChild(document.createElement('br'))\n\n                    //// Party type\n                    let partyTypeLabel  = document.createElement('strong')\n                    partyTypeLabel.textContent = 'Type: '\n                    partyDiv.appendChild(partyTypeLabel)\n\n                    let partyTypeText = document.createElement('span')\n                    partyTypeText.textContent = BAUnits[0]['responsibilities'][responsibility]['party']['type']\n                    partyDiv.appendChild(partyTypeText)\n                    partyDiv.appendChild(document.createElement('br'))\n\n                    responsibilityDiv.appendChild(partyDiv)\n                    responsibilityDiv.appendChild(document.createElement('hr'))\n\n                    responsibilitiesDiv.appendChild(responsibilityDiv)\n                }\n                titleInformationOverlay.appendChild(responsibilitiesDiv)\n            }\n            // Display overlay\n            titleInformationOverlay.style.display = 'block'\n        }\n    })\n})\n\nfunction toggleLayers(filter) {\n    for (let i in floorplanLayers) {\n        if (floorplanLayers[i].layer.includes(filter)) {\n            let visibility = map.getLayoutProperty(floorplanLayers[i].layer, 'visibility')\n            if (visibility == 'visible') {\n                map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'none')\n                this.className = ''\n            } else {  \n                this.className = 'active'\n                map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'visible')\n            }\n        }\n    }\n}\n\nlet filterCheckboxes = document.getElementsByName('filter')\nfor (let i = 0; i<filterCheckboxes.length; i++) {\n    filterCheckboxes[i].addEventListener('change', function(e) {\n    let filter = e.target.value\n    e.preventDefault()\n    e.stopPropagation()\n    \n    toggleLayers(filter)  \n    })\n}\n\n\n"],"sourceRoot":""}