{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./search_index_map_ui/assets/src/javascripts/mapbox.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","mapboxgl","accessToken","map","Map","style","center","zoom","pitch","bearing","container","antialias","buildingHeightSourceLayer","floorplanLayers","layer","sourceLayer","spatialUnitsDiv","document","getElementById","spatialUnits","JSON","parse","innerHTML","toggleLayers","filter","console","log","includes","visibility","getLayoutProperty","setLayoutProperty","this","className","on","buildingIdsWithFloorplans","features","querySourceFeatures","j","properties","fid","push","buildingFilter","concat","buildingFeatures","setFeatureState","id","source","hide","displayFloorplan","titleInformationOverlay","buildingId","baseHeight","extrusionHeight","floorHeight","RelHmax","num_floors","floor","setPaintProperty","validate","highlightTitle","featureId","titleFeatureIds","titleNumber","featureIds","getFeatureIdsByTitleNumber","getSpatialUnitById","k","highlight","find","element","display","e","feature","queryRenderedFeatures","point","getFeatureState","length","hideFloorplan","removeFeatureState","disableHighlightTitle","layers","currentFeature","spatialUnit","BAUnits","BAUnit","currentBAUnit","title","address","rights","restrictions","responsibilities","right","currentRight","newRight","rightId","type","description","mortgages","mortgage","partyId","currentMortgage","newMortgage","amount","interestRate","restriction","currentRestriction","newRestriction","responsibility","currentResponsibility","newResponsibility","createElement","textContent","appendChild","rightsDiv","rightsLabel","rightDiv","rightTypeLabel","rightTypeText","rightDescriptionLabel","rightDescriptionText","partyLabel","partyDiv","partyNameLabel","partyNameText","partyTypeLabel","partyTypeText","restrictionsDiv","restrictionsLabel","restrictionDiv","restrictionTypeLabel","restrictionTypeText","restrictionDescriptionLabel","restrictionDescriptionText","responsibilitiesDiv","responsibilitiesLabel","responsibilityDiv","responsibilityTypeLabel","responsibilityTypeText","responsibilityDescriptionLabel","responsibilityDescriptionText","filterCheckboxes","getElementsByName","addEventListener","target","preventDefault","stopPropagation"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,qBCjFIC,SAASC,YAAc,iGACnB,IAAIC,EAAM,IAAIF,SAASG,IAAI,CAC3BC,MAAO,wDAEPC,OAAO,EAAE,UAAW,YACpBC,KAAM,KACNC,MAAO,GACPC,SAAU,KACVC,UAAW,MACXC,WAAW,IAGTC,EAA4B,sCAE5BC,EAAkB,CAMpB,CAACC,MAAO,kBAAmBC,YAAa,qCACxC,CAACD,MAAO,qBAAsBC,YAAa,8BAC3C,CAACD,MAAO,qBAAsBC,YAAa,8BAC3C,CAACD,MAAO,qBAAsBC,YAAa,8BAC3C,CAACD,MAAO,qBAAsBC,YAAa,+BAGzCC,EAAkBC,SAASC,eAAe,iBAC1CC,EAAeC,KAAKC,MAAML,EAAgBM,WAAW,GA4d3D,SAASC,EAAaC,GAElB,IAAK,IAAIvD,KADTwD,QAAQC,IAAIF,GACEX,EAGV,GAFAY,QAAQC,IAAIb,EAAgB5C,GAAG6C,OAC/BW,QAAQC,IAAIb,EAAgB5C,GAAG6C,MAAMa,SAASH,IAC1CX,EAAgB5C,GAAG6C,MAAMa,SAASH,GAAS,CAC3C,IAAII,EAAazB,EAAI0B,kBAAkBhB,EAAgB5C,GAAG6C,MAAO,cACjEW,QAAQC,IAAIE,GACO,YAAfA,GACAzB,EAAI2B,kBAAkBjB,EAAgB5C,GAAG6C,MAAO,aAAc,QAC9DiB,KAAKC,UAAY,KAEjBD,KAAKC,UAAY,SACjB7B,EAAI2B,kBAAkBjB,EAAgB5C,GAAG6C,MAAO,aAAc,aAve9EX,EAAI8B,GAAG,OAAQ,WAGX,IAAMC,EAA4B,GAClC,IAAK,IAAIjE,KAAK4C,EAAiB,CAC3B,IAAMsB,EAAWhC,EAAIiC,oBAAoB,YAAa,CAClDrB,YAAaF,EAAgB5C,GAAG8C,cAEpC,IAAK,IAAIsB,KAAKF,EACLD,EAA0BP,SAASQ,EAASE,GAAGC,WAAWC,MAC3DL,EAA0BM,KAAKL,EAASE,GAAGC,WAAWC,KAMlE,IAAIE,EAAiB,CAAC,KAAM,OAAOC,OAAOR,GACpCS,EAAmBxC,EAAIiC,oBAAoB,YAAa,CAC1DrB,YAAaH,EACbY,OAAQiB,IAGZ,IAAK,IAAIxE,KAAK0E,EACVxC,EAAIyC,gBAAgB,CAACC,GAAIF,EAAiB1E,GAAG4E,GAAIC,OAAQ,YAAa/B,YAAaH,GAA4B,CAACmC,MAAQ,IACxHC,EAAiBL,EAAiB1E,GAAGqE,WAAWC,KAIpD,IAAIU,EAA0BhC,SAASC,eAAe,6BAKtD,SAAS8B,EAAiBE,GACtB,IAAK,IAAIjF,KAAK4C,EAIV,GAHAV,EAAI2B,kBAAkBjB,EAAgB5C,GAAG6C,MAAO,aAAc,YAGzDD,EAAgB5C,GAAG6C,MAAMa,SAAS,YAAa,CAEhD,IAAMQ,EAAWhC,EAAIiC,oBAAoB,YAAa,CAClDrB,YAAaF,EAAgB5C,GAAG8C,YAChCS,OAAQ,CAAC,KAAM,MAAO0B,KAG1B,IAAK,IAAIb,KAAKF,EAAU,CAEpB,IAAIgB,EAAa,EACbC,EAAkB,EAGtB,GAAKvC,EAAgB5C,GAAG6C,MAAMa,SAAS,YAEhC,CACH,IAAMuB,EAAaf,EAASE,GAAGC,WAAWC,IASpCc,EAPkBlD,EAAIiC,oBAAoB,YAAa,CACzDrB,YAAaH,EACbY,OAAQ,CAAC,KAAM,MAAO0B,KACvB,GACoCZ,WAAWgB,QAGbnB,EAASE,GAAGC,WAAWiB,WAC5DH,EAAkBC,GAAelB,EAASE,GAAGC,WAAWkB,MAAQ,GAChEL,EAAaE,EAAYlB,EAASE,GAAGC,WAAWkB,WAbhDJ,EAAkB,IAkBtBjD,EAAIsD,iBAAiB5C,EAAgB5C,GAAG6C,MAAO,wBAAyBsC,EAAiB,CAACM,UAAU,IACpGvD,EAAIsD,iBAAiB5C,EAAgB5C,GAAG6C,MAAO,sBAAuBqC,EAAY,CAACO,UAAU,MAmB7G,SAASC,EAAeC,GAEpB,IAEIC,EAuBR,SAAoCC,GAChC,IAAIC,EAAa,GACjB,IAAK,IAAI9F,KAAKkD,EACNA,EAAalD,GAAb,SAA4B,GAA5B,MAA0C6F,GAC1CC,EAAWvB,KAAKrB,EAAalD,GAAb,IAGxB,OAAO8F,EA9BeC,CAFJC,EAAmBL,GACG,SAAa,GAAxB,MAG7B,IAAK,IAAI3F,KAAK4C,EACV,IAAK,IAAIwB,KAAKwB,EAAiB,CAC3B,IAAM1B,EAAWhC,EAAIiC,oBAAoB,YAAa,CAClDrB,YAAaF,EAAgB5C,GAAG8C,YAChCS,OAAQ,CAAC,KAAM,KAAMqC,EAAgBxB,MAGzC,IAAK,IAAI6B,KAAK/B,EACVhC,EAAIyC,gBAAgB,CAACC,GAAIV,EAAS+B,GAAGrB,GAAIC,OAAQ,YAAa/B,YAAaF,EAAgB5C,GAAG8C,aAAc,CAACoD,WAAa,KAuB1I,SAASF,EAAmBL,GAIxB,OAHazC,EAAaiD,KAAK,SAASC,GACpC,OAAOA,EAAQxB,IAAMe,IApGH3C,SAASC,eAAe,yBAC9Bb,MAAMiE,QAAU,QAyGpCnE,EAAI8B,GAAG,QAAS,+BAAgC,SAAUsC,GACtD,IACMC,EADWrE,EAAIsE,sBAAsBF,EAAEG,OACpB,GACrBvE,EAAIwE,gBAAgB,CAAC9B,GAAI2B,EAAQ3B,GAAIC,OAAQ,YAAa/B,YAAaH,IAA4BmC,OA7D3G,SAAuBG,GACnB,IAAK,IAAIjF,KAAK4C,EACOV,EAAIiC,oBAAoB,YAAa,CAClDrB,YAAaF,EAAgB5C,GAAG8C,YAChCS,OAAQ,CAAC,KAAM,MAAO0B,KAEb0B,OAAS,IAClBzE,EAAIsD,iBAAiB5C,EAAgB5C,GAAG6C,MAAO,sBAAuB,EAAG,CAAC4C,UAAU,IACpFvD,EAAIsD,iBAAiB5C,EAAgB5C,GAAG6C,MAAO,wBAAyB,EAAG,CAAC4C,UAAU,KAsD1FmB,CAAcL,EAAQlC,WAAWC,KACjCpC,EAAI2E,mBAAmB,CAACjC,GAAI2B,EAAQ3B,GAAIC,OAAQ,YAAa/B,YAAaH,GAA4B,UAEtGT,EAAIyC,gBAAgB,CAACC,GAAI2B,EAAQ3B,GAAIC,OAAQ,YAAa/B,YAAaH,GAA4B,CAACmC,MAAQ,IAC5GC,EAAiBwB,EAAQlC,WAAWC,QAK5CpC,EAAI8B,GAAG,YAAa,SAASsC,IAtC7B,WACI,IAAK,IAAItG,KAAK4C,EACVoC,EAAwB5C,MAAMiE,QAAU,OACxCnE,EAAI2E,mBAAmB,CAAChC,OAAQ,YAAa/B,YAAaF,EAAgB5C,GAAG8C,cAqCjFgE,GAGA,IAAMC,EAAS,GACf,IAAK,IAAI/G,KAAK4C,EACVmE,EAAOxC,KAAK3B,EAAgB5C,GAAG6C,OAInC,IAAMqB,EAAWhC,EAAIsE,sBAAsBF,EAAEG,MAAO,CAAEM,OAAQA,IAC9D,GAAI7C,EAASyC,OAAS,EAAG,CACrB,IAAMK,EAAiB9C,EAAS,GAEhCwB,EAAesB,EAAe3C,WAAWO,IAEzC,IAEIqC,EAAcjB,EAFFgB,EAAe3C,WAAWO,IAItCsC,EAAU,GAEd,GAAID,EAEA,IAAK,IAAIE,KAAUF,EAAW,SAAc,CACxC,IAAIG,EAAgBH,EAAW,SAAaE,GAExCE,EAAQ,CACRC,QAASL,EAAYK,QACrBzB,YAAauB,EAAa,KAC1BG,OAAQ,GACRC,aAAc,GACdC,iBAAkB,IAItB,IAAK,IAAIC,KAASN,EAAa,OAAY,CACvC,IAAIO,EAAeP,EAAa,OAAWM,GACvCE,EAAW,CACfC,QAASF,EAAY,SACrBG,KAAMH,EAAY,KAClBI,YAAaJ,EAAY,YACzBK,UAAW,IAWX,IAAK,IAAIC,KARLN,EAAY,QAChBC,EAAQ,MAAY,CAChBrH,KAAMoH,EAAY,MAAZ,KACNG,KAAMH,EAAY,MAAZ,KACNO,QAASP,EAAY,QAIJA,EAAY,UAAe,CAChD,IAAIQ,EAAkBR,EAAY,UAAcM,GAC5CG,EAAc,CACdN,KAAMK,EAAe,KACrBE,OAAQF,EAAe,OACvBG,aAAcH,EAAe,eAEjCP,EAAQ,UAAcrD,KAAK6D,GAE3Bf,EAAK,OAAW9C,KAAKqD,GAIzB,IAAK,IAAIW,KAAenB,EAAa,aAAkB,CACnD,IAAIoB,EAAqBpB,EAAa,aAAiBmB,GACnDE,EAAiB,CACrBX,KAAMU,EAAkB,KACxBT,YAAaS,EAAkB,aAG3BA,EAAkB,QACtBC,EAAc,MAAY,CACtBlI,KAAMiI,EAAkB,MAAlB,KACNV,KAAMU,EAAkB,MAAlB,KACNN,QAASM,EAAkB,QAG/BnB,EAAK,aAAiB9C,KAAKkE,GAI/B,IAAK,IAAIC,KAAkBtB,EAAa,iBAAsB,CAC1D,IAAIuB,EAAwBvB,EAAa,iBAAqBsB,GAC1DE,EAAoB,CACxBd,KAAMa,EAAqB,KAC3BZ,YAAaY,EAAqB,aAG9BA,EAAqB,QACzBC,EAAiB,MAAY,CACzBrI,KAAMoI,EAAqB,MAArB,KACNb,KAAMa,EAAqB,MAArB,KACNT,QAASS,EAAqB,QAGlCtB,EAAK,iBAAqB9C,KAAKqE,GAEnC1B,EAAQ3C,KAAK8C,GAMrBrC,EAAwB3B,UAAY,GAGpC,IAAIwC,EAAc7C,SAAS6F,cAAc,UACzChD,EAAYiD,YAAc5B,EAAQ,GAAR,YAC1BlC,EAAwB+D,YAAYlD,GACpCb,EAAwB+D,YAAY/F,SAAS6F,cAAc,OAG3D,IAAIG,EAAYhG,SAAS6F,cAAc,OACvC,GAAI3B,EAAQ,GAAR,OAAqBP,OAAS,EAAG,CACjC,IAAIsC,EAAcjG,SAAS6F,cAAc,UAGzC,IAAKnB,SAFLuB,EAAYH,YAAc,UAC1BE,EAAUD,YAAYE,GACR/B,EAAQ,GAAR,OAAsB,CAChC,IAAIgC,EAAWlG,SAAS6F,cAAc,OACtCK,EAAS9G,MAAQ,qBAGjB,IAAI+G,EAAkBnG,SAAS6F,cAAc,UAC7CM,EAAeL,YAAc,SAC7BI,EAASH,YAAYI,GAErB,IAAIC,EAAgBpG,SAAS6F,cAAc,QAM3C,GALAO,EAAcN,YAAc5B,EAAQ,GAAR,OAAqBQ,OAArB,KAC5BwB,EAASH,YAAYK,GACrBF,EAASH,YAAY/F,SAAS6F,cAAc,OAGxC3B,EAAQ,GAAR,OAAqBQ,OAArB,YAA4C,CAC5C,IAAI2B,EAAyBrG,SAAS6F,cAAc,UACpDQ,EAAsBP,YAAc,gBACpCI,EAASH,YAAYM,GAErB,IAAIC,EAAuBtG,SAAS6F,cAAc,QAClDS,EAAqBR,YAAc5B,EAAQ,GAAR,OAAqBQ,OAArB,YACnCwB,EAASH,YAAYO,GACrBJ,EAASH,YAAY/F,SAAS6F,cAAc,OAIhD,IAAIU,EAAcvG,SAAS6F,cAAc,UACzCU,EAAWT,YAAc,UACzBI,EAASH,YAAYQ,GAErB,IAAIC,EAAWxG,SAAS6F,cAAc,OACtCW,EAASpH,MAAQ,qBAGjB,IAAIqH,EAAkBzG,SAAS6F,cAAc,UAC7CY,EAAeX,YAAc,SAC7BU,EAAST,YAAYU,GAErB,IAAIC,EAAgB1G,SAAS6F,cAAc,QAC3Ca,EAAcZ,YAAc5B,EAAQ,GAAR,OAAqBQ,OAArB,WAC5B8B,EAAST,YAAYW,GACrBF,EAAST,YAAY/F,SAAS6F,cAAc,OAG5C,IAAIc,EAAkB3G,SAAS6F,cAAc,UAC7Cc,EAAeb,YAAc,SAC7BU,EAAST,YAAYY,GAErB,IAAIC,EAAgB5G,SAAS6F,cAAc,QAC3Ce,EAAcd,YAAc5B,EAAQ,GAAR,OAAqBQ,OAArB,WAC5B8B,EAAST,YAAYa,GACrBJ,EAAST,YAAY/F,SAAS6F,cAAc,OAE5CK,EAASH,YAAYS,GACrBN,EAASH,YAAY/F,SAAS6F,cAAc,OAE5CG,EAAUD,YAAYG,GAE1BlE,EAAwB+D,YAAYC,GAIxC,IAAIa,EAAkB7G,SAAS6F,cAAc,OAC7C,GAAI3B,EAAQ,GAAR,aAA2BP,OAAS,EAAG,CACvC,IAAImD,EAAoB9G,SAAS6F,cAAc,UAG/C,IAAKN,eAFLuB,EAAkBhB,YAAc,gBAChCe,EAAgBd,YAAYe,GACR5C,EAAQ,GAAR,aAA4B,CAC5C,IAAI6C,EAAiB/G,SAAS6F,cAAc,OAC5CkB,EAAe3H,MAAQ,qBAGvB,IAAI4H,EAAwBhH,SAAS6F,cAAc,UACnDmB,EAAqBlB,YAAc,SACnCiB,EAAehB,YAAYiB,GAE3B,IAAIC,EAAsBjH,SAAS6F,cAAc,QAMjD,GALAoB,EAAoBnB,YAAc5B,EAAQ,GAAR,aAA2BqB,aAA3B,KAClCwB,EAAehB,YAAYkB,GAC3BF,EAAehB,YAAY/F,SAAS6F,cAAc,OAG9C3B,EAAQ,GAAR,aAA2BqB,aAA3B,YAAwD,CACxD,IAAI2B,EAA+BlH,SAAS6F,cAAc,UAC1DqB,EAA4BpB,YAAc,gBAC1CiB,EAAehB,YAAYmB,GAE3B,IAAIC,EAA6BnH,SAAS6F,cAAc,QACxDsB,EAA2BrB,YAAc5B,EAAQ,GAAR,aAA2BqB,aAA3B,YACzCwB,EAAehB,YAAYoB,GAC3BJ,EAAehB,YAAY/F,SAAS6F,cAAc,OAItD,IAAIU,EAAcvG,SAAS6F,cAAc,UACzCU,EAAWT,YAAc,UACzBiB,EAAehB,YAAYQ,GAE3B,IAAIC,EAAWxG,SAAS6F,cAAc,OACtCW,EAASpH,MAAQ,qBAGjB,IAAIqH,EAAkBzG,SAAS6F,cAAc,UAC7CY,EAAeX,YAAc,SAC7BU,EAAST,YAAYU,GAErB,IAAIC,EAAgB1G,SAAS6F,cAAc,QAC3Ca,EAAcZ,YAAc5B,EAAQ,GAAR,aAA2BqB,aAA3B,WAC5BiB,EAAST,YAAYW,GACrBF,EAAST,YAAY/F,SAAS6F,cAAc,OAG5C,IAAIc,EAAkB3G,SAAS6F,cAAc,UAC7Cc,EAAeb,YAAc,SAC7BU,EAAST,YAAYY,GAErB,IAAIC,EAAgB5G,SAAS6F,cAAc,QAC3Ce,EAAcd,YAAc5B,EAAQ,GAAR,aAA2BqB,aAA3B,WAC5BiB,EAAST,YAAYa,GACrBJ,EAAST,YAAY/F,SAAS6F,cAAc,OAE5CkB,EAAehB,YAAYS,GAC3BO,EAAehB,YAAY/F,SAAS6F,cAAc,OAElDgB,EAAgBd,YAAYgB,GAEhC/E,EAAwB+D,YAAYc,GAIxC,IAAIO,GAAsBpH,SAAS6F,cAAc,OACjD,GAAI3B,EAAQ,GAAR,iBAA+BP,OAAS,EAAG,CAC3C,IAAI0D,GAAwBrH,SAAS6F,cAAc,UAGnD,IAAKH,kBAFL2B,GAAsBvB,YAAc,oBACpCsB,GAAoBrB,YAAYsB,IACTnD,EAAQ,GAAR,iBAAgC,CACnD,IAAIoD,GAAoBtH,SAAS6F,cAAc,OAC/CyB,GAAkBlI,MAAQ,qBAG1B,IAAImI,GAA2BvH,SAAS6F,cAAc,UACtD0B,GAAwBzB,YAAc,SACtCwB,GAAkBvB,YAAYwB,IAE9B,IAAIC,GAAyBxH,SAAS6F,cAAc,QAMpD,GALA2B,GAAuB1B,YAAc5B,EAAQ,GAAR,iBAA+BwB,gBAA/B,KACrC4B,GAAkBvB,YAAYyB,IAC9BF,GAAkBvB,YAAY/F,SAAS6F,cAAc,OAGjD3B,EAAQ,GAAR,iBAA+BwB,gBAA/B,YAA+D,CAC/D,IAAI+B,GAAkCzH,SAAS6F,cAAc,UAC7D4B,GAA+B3B,YAAc,gBAC7CwB,GAAkBvB,YAAY0B,IAE9B,IAAIC,GAAgC1H,SAAS6F,cAAc,QAC3D6B,GAA8B5B,YAAc5B,EAAQ,GAAR,iBAA+BwB,gBAA/B,YAC5C4B,GAAkBvB,YAAY2B,IAC9BJ,GAAkBvB,YAAY/F,SAAS6F,cAAc,OAIzD,IAAIU,GAAcvG,SAAS6F,cAAc,UACzCU,GAAWT,YAAc,UACzBwB,GAAkBvB,YAAYQ,IAE9B,IAAIC,GAAWxG,SAAS6F,cAAc,OACtCW,GAASpH,MAAQ,qBAGjB,IAAIqH,GAAkBzG,SAAS6F,cAAc,UAC7CY,GAAeX,YAAc,SAC7BU,GAAST,YAAYU,IAErB,IAAIC,GAAgB1G,SAAS6F,cAAc,QAC3Ca,GAAcZ,YAAc5B,EAAQ,GAAR,iBAA+BwB,gBAA/B,WAC5Bc,GAAST,YAAYW,IACrBF,GAAST,YAAY/F,SAAS6F,cAAc,OAG5C,IAAIc,GAAkB3G,SAAS6F,cAAc,UAC7Cc,GAAeb,YAAc,SAC7BU,GAAST,YAAYY,IAErB,IAAIC,GAAgB5G,SAAS6F,cAAc,QAC3Ce,GAAcd,YAAc5B,EAAQ,GAAR,iBAA+BwB,gBAA/B,WAC5Bc,GAAST,YAAYa,IACrBJ,GAAST,YAAY/F,SAAS6F,cAAc,OAE5CyB,GAAkBvB,YAAYS,IAC9Bc,GAAkBvB,YAAY/F,SAAS6F,cAAc,OAErDuB,GAAoBrB,YAAYuB,IAEpCtF,EAAwB+D,YAAYqB,IAIxCpF,EAAwB5C,MAAMiE,QAAU,aA0BpD,IADA,IAAIsE,EAAmB3H,SAAS4H,kBAAkB,UACzC5K,EAAI,EAAGA,EAAE2K,EAAiBhE,OAAQ3G,IACvC2K,EAAiB3K,GAAG6K,iBAAiB,SAAU,SAASvE,GACxD,IAAI/C,EAAS+C,EAAEwE,OAAO7J,MACtBqF,EAAEyE,iBACFzE,EAAE0E,kBAEF1H,EAAaC","file":"mapbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","\n    mapboxgl.accessToken = 'pk.eyJ1IjoibWF0dGdpcmRsZXIiLCJhIjoiY2lteW85cm5lMDBmcnY5bTFxY2Zsc3c2OCJ9.VvO2DhAhOVrcjJ0Usw8JIA'\n        let map = new mapboxgl.Map({\n        style: 'mapbox://styles/mattgirdler/cjznu3ztu06m31clp2j37yybz',\n        // center: [-3.52841649197765, 50.7242226667005],\n        center:[-3.5208657, 50.7227184],\n        zoom: 17.5,\n        pitch: 45,\n        bearing: -17.6,\n        container: 'map',\n        antialias: true\n    })\n\n    const buildingHeightSourceLayer = \"exeter_buildings_with_height-0ygi87\"\n    const airspaceSourceLayer = \"airspace-leasehold-a6g827\"\n    const floorplanLayers = [\n        // {layer: 'princesshay-level-gf-leasehold', sourceLayer: 'princesshay-level-gf-8yagcd'},\n        // {layer: 'princesshay-level-gf-freehold', sourceLayer: 'princesshay-level-gf-8yagcd'},\n        // {layer: 'princesshay-level-1-leasehold', sourceLayer: 'princesshay-level-1-90cnib'},\n        // {layer: 'princesshay-level-1-freehold', sourceLayer: 'princesshay-level-1-90cnib'},\n        // {layer: 'airspace-leasehold-a6g827', sourceLayer: 'airspace-a6g827'},\n        {layer: 'freehold-diumk5', sourceLayer: 'osgb1000012317615-freehold-diumk5'},\n        {layer: 'leasehold-0-83okhj', sourceLayer: 'osgb1000012317615-0-83okhj'},\n        {layer: 'leasehold-1-54g9gf', sourceLayer: 'osgb1000012317615-1-54g9gf'},\n        {layer: 'leasehold-2-ccs62k', sourceLayer: 'osgb1000012317615-2-ccs62k'},\n        {layer: 'leasehold-3-8aah9q', sourceLayer: 'osgb1000012317615-3-8aah9q'}\n    ]\n\n    const spatialUnitsDiv = document.getElementById('spatial-units')\n    const spatialUnits = JSON.parse(spatialUnitsDiv.innerHTML)[0]\n\n    map.on('load', function() {\n\n        // Create array of building IDs with boundary/floorplan data\n        const buildingIdsWithFloorplans = []\n        for (let i in floorplanLayers) {\n            const features = map.querySourceFeatures('composite', {\n                sourceLayer: floorplanLayers[i].sourceLayer,\n            })\n            for (let j in features) {\n                if (!buildingIdsWithFloorplans.includes(features[j].properties.fid)) {\n                    buildingIdsWithFloorplans.push(features[j].properties.fid)\n                }\n            }\n        }\n\n        // Hide any buildings that have boundary/floorplan data \n        let buildingFilter = [\"in\", \"fid\"].concat(buildingIdsWithFloorplans)\n        const buildingFeatures = map.querySourceFeatures('composite', {\n            sourceLayer: buildingHeightSourceLayer,\n            filter: buildingFilter\n        })\n\n        for (let i in buildingFeatures) {\n            map.setFeatureState({id: buildingFeatures[i].id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, {'hide': true})\n            displayFloorplan(buildingFeatures[i].properties.fid)\n        }\n\n        // Create an overlay\n        let titleInformationOverlay = document.getElementById('title-information-overlay')\n        let toggleLayersOverlay = document.getElementById('toggle-layers-overlay')\n        toggleLayersOverlay.style.display = 'block'\n\n        // Display interior floorplans after hiding external geometry\n        function displayFloorplan(buildingId) {\n            for (let i in floorplanLayers) {\n                map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'visible')\n\n                // Don't worry about extruding the airspace layer, this is extruded by default\n                if (!floorplanLayers[i].layer.includes('airspace')) {\n                    // Get the features within the layer\n                    const features = map.querySourceFeatures('composite', {\n                        sourceLayer: floorplanLayers[i].sourceLayer, \n                        filter: [\"==\", 'fid', buildingId]\n                    })\n     \n                    for (let j in features) {\n\n                        let baseHeight = 0\n                        let extrusionHeight = 0\n\n                        // TODO - if it's a freehold, extrude up to the sky\n                        if (!floorplanLayers[i].layer.includes('freehold')) {\n                            extrusionHeight = 100\n                        } else {\n                            const buildingId = features[j].properties.fid\n                            // Get building height from OS dataset\n                            const buildingFeature = map.querySourceFeatures('composite', {\n                                sourceLayer: buildingHeightSourceLayer,\n                                filter: [\"==\", 'fid', buildingId]\n                            })[0]\n                            const buildingHeight = buildingFeature.properties.RelHmax \n        \n                            // Generate feature height values based on building height\n                            const floorHeight = buildingHeight / features[j].properties.num_floors\n                            extrusionHeight = floorHeight * (features[j].properties.floor + 1)\n                            baseHeight = floorHeight*features[j].properties.floor\n                        }\n\n                        // Add +1 to freehold heights to avoid clipping effect with containing leaseholds \n                        // map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', (floorplanLayers[i].layer.includes('freehold') ? extrusionHeight+1 : extrusionHeight), {validate: true})\n                        map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', extrusionHeight, {validate: true})\n                        map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-base', baseHeight, {validate: true})\n                    }\n                }\n            }\n        }\n\n        function hideFloorplan(buildingId) {\n            for (let i in floorplanLayers) {\n                const features = map.querySourceFeatures('composite', {\n                    sourceLayer: floorplanLayers[i].sourceLayer, \n                    filter: [\"==\", 'fid', buildingId]\n                })\n                if (features.length > 0) {\n                    map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-base', 0, {validate: true})\n                    map.setPaintProperty(floorplanLayers[i].layer, 'fill-extrusion-height', 0, {validate: true})\n                }\n            }\n        }\n\n        function highlightTitle(featureId) {\n\n            let spatialUnit = getSpatialUnitById(featureId)\n            let spatialUnitTitleNumber = spatialUnit['ba_units'][0]['name']\n            let titleFeatureIds = getFeatureIdsByTitleNumber(spatialUnitTitleNumber)\n\n            for (let i in floorplanLayers) {\n                for (let j in titleFeatureIds) {\n                    const features = map.querySourceFeatures('composite', { \n                        sourceLayer: floorplanLayers[i].sourceLayer,\n                        filter: ['==', 'id', titleFeatureIds[j]] \n                    })\n\n                    for (let k in features) {\n                        map.setFeatureState({id: features[k].id, source: 'composite', sourceLayer: floorplanLayers[i].sourceLayer}, {'highlight': true})\n                    }\n                }\n            }\n        }\n\n        function disableHighlightTitle() {\n            for (let i in floorplanLayers) {\n                titleInformationOverlay.style.display = 'none'\n                map.removeFeatureState({source: 'composite', sourceLayer: floorplanLayers[i].sourceLayer})\n            }\n        }\n\n        function getFeatureIdsByTitleNumber(titleNumber) {\n            let featureIds = []\n            for (let i in spatialUnits) {\n                if (spatialUnits[i]['ba_units'][0]['name'] == titleNumber) {\n                    featureIds.push(spatialUnits[i]['id'])\n                }\n            }\n            return featureIds\n        }\n\n        function getSpatialUnitById(featureId) {\n            let result = spatialUnits.find(function(element) {\n                return element.id == featureId\n            })\n            return result\n        }\n\n        // Toggle building polygons on/off\n        map.on('click', 'exeter-buildings-with-height', function (e) {\n            const features = map.queryRenderedFeatures(e.point)\n            const feature = features[0]\n            if (map.getFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}).hide) {\n                hideFloorplan(feature.properties.fid)\n                map.removeFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, 'hide')\n            } else {\n                map.setFeatureState({id: feature.id, source: 'composite', sourceLayer: buildingHeightSourceLayer}, {'hide': true})\n                displayFloorplan(feature.properties.fid)\n            }\n        })\n\n        // Display title information from floorplans\n        map.on('mousemove', function(e) {\n\n            disableHighlightTitle()\n\n            // Create array of floorplan style layers for filtering\n            const layers = []\n            for (let i in floorplanLayers) {\n                layers.push(floorplanLayers[i].layer)\n            }\n\n            // Check if mouseover is on a floorplan layer\n            const features = map.queryRenderedFeatures(e.point, { layers: layers })\n            if (features.length > 0) {\n                const currentFeature = features[0]\n\n                highlightTitle(currentFeature.properties.id)\n                \n                let featureId = currentFeature.properties.id\n\n                let spatialUnit = getSpatialUnitById(featureId)\n\n                let BAUnits = []\n\n                if (spatialUnit) {\n                    \n                    for (let BAUnit in spatialUnit['ba_units']) {\n                        let currentBAUnit = spatialUnit['ba_units'][BAUnit]\n\n                        let title = { \n                            address: spatialUnit.address,\n                            titleNumber: currentBAUnit['name'],\n                            rights: [],\n                            restrictions: [],\n                            responsibilities: []\n                        }\n\n                        // Rights\n                        for (let right in currentBAUnit['rights']) {\n                            let currentRight = currentBAUnit['rights'][right]\n                            let newRight = {\n                            rightId: currentRight['right_id'],\n                            type: currentRight['type'],\n                            description: currentRight['description'],\n                            mortgages: []\n                            }\n\n                            if (currentRight['party']) {\n                            newRight['party'] = {\n                                name: currentRight['party']['name'],\n                                type: currentRight['party']['type'],\n                                partyId: currentRight['party']\n                            }\n                            }\n\n                            for (let mortgage in currentRight['mortgages']) {\n                            let currentMortgage = currentRight['mortgages'][mortgage]\n                            let newMortgage = {\n                                type: currentMortgage['type'],\n                                amount: currentMortgage['amount'],\n                                interestRate: currentMortgage['interest_rate']\n                            }\n                            newRight['mortgages'].push(newMortgage)\n                            } \n                            title['rights'].push(newRight)\n                        }\n\n                        // Add restrictions\n                        for (let restriction in currentBAUnit['restrictions']) {\n                            let currentRestriction = currentBAUnit['restrictions'][restriction]\n                            let newRestriction = {\n                            type: currentRestriction['type'],\n                            description: currentRestriction['description']\n                            }\n\n                            if (currentRestriction['party']) {\n                            newRestriction['party'] = {\n                                name: currentRestriction['party']['name'],\n                                type: currentRestriction['party']['type'],\n                                partyId: currentRestriction['party']\n                            }\n                            }\n                            title['restrictions'].push(newRestriction)\n                        }\n\n                        // Add responsibilities\n                        for (let responsibility in currentBAUnit['responsibilities']) {\n                            let currentResponsibility = currentBAUnit['responsibilities'][responsibility]\n                            let newResponsibility = {\n                            type: currentResponsibility['type'],\n                            description: currentResponsibility['description']\n                            }\n\n                            if (currentResponsibility['party']) {\n                            newResponsibility['party'] = {\n                                name: currentResponsibility['party']['name'],\n                                type: currentResponsibility['party']['type'],\n                                partyId: currentResponsibility['party']\n                            }\n                            }\n                            title['responsibilities'].push(newResponsibility)\n                        }\n                        BAUnits.push(title)\n                    }\n                } \n\n    \n                // Create HTML for title details \n                titleInformationOverlay.innerHTML = ''\n\n                // titleInformationOverlay.innerHTML = JSON.stringify(spatialUnit)\n                let titleNumber = document.createElement('strong')\n                titleNumber.textContent = BAUnits[0]['titleNumber']\n                titleInformationOverlay.appendChild(titleNumber)\n                titleInformationOverlay.appendChild(document.createElement('hr'))\n\n                // Rights data\n                let rightsDiv = document.createElement('div')\n                if (BAUnits[0]['rights'].length > 0) {\n                    let rightsLabel = document.createElement('strong')\n                    rightsLabel.textContent = 'Rights:'\n                    rightsDiv.appendChild(rightsLabel)\n                    for (right in BAUnits[0]['rights']) {\n                        let rightDiv = document.createElement('div')\n                        rightDiv.style = \"margin-left: 10px;\"\n\n                        // Right Type\n                        let rightTypeLabel  = document.createElement('strong')\n                        rightTypeLabel.textContent = 'Type: '\n                        rightDiv.appendChild(rightTypeLabel)\n\n                        let rightTypeText = document.createElement('span')\n                        rightTypeText.textContent = BAUnits[0]['rights'][right]['type']\n                        rightDiv.appendChild(rightTypeText)\n                        rightDiv.appendChild(document.createElement('br'))\n\n                        // Right description\n                        if (BAUnits[0]['rights'][right]['description']) {\n                            let rightDescriptionLabel  = document.createElement('strong')\n                            rightDescriptionLabel.textContent = 'Description: '\n                            rightDiv.appendChild(rightDescriptionLabel)\n    \n                            let rightDescriptionText = document.createElement('span')\n                            rightDescriptionText.textContent = BAUnits[0]['rights'][right]['description']\n                            rightDiv.appendChild(rightDescriptionText)\n                            rightDiv.appendChild(document.createElement('br'))\n                        }\n\n                        // Right Party\n                        let partyLabel  = document.createElement('strong')\n                        partyLabel.textContent = 'Party: '\n                        rightDiv.appendChild(partyLabel)\n\n                        let partyDiv = document.createElement('div')\n                        partyDiv.style = \"margin-left: 10px;\"\n\n                        //// Party name\n                        let partyNameLabel  = document.createElement('strong')\n                        partyNameLabel.textContent = 'Name: '\n                        partyDiv.appendChild(partyNameLabel)\n\n                        let partyNameText = document.createElement('span')\n                        partyNameText.textContent = BAUnits[0]['rights'][right]['party']['name']\n                        partyDiv.appendChild(partyNameText)\n                        partyDiv.appendChild(document.createElement('br'))\n\n                        //// Party type\n                        let partyTypeLabel  = document.createElement('strong')\n                        partyTypeLabel.textContent = 'Type: '\n                        partyDiv.appendChild(partyTypeLabel)\n\n                        let partyTypeText = document.createElement('span')\n                        partyTypeText.textContent = BAUnits[0]['rights'][right]['party']['type']\n                        partyDiv.appendChild(partyTypeText)\n                        partyDiv.appendChild(document.createElement('br'))\n\n                        rightDiv.appendChild(partyDiv)\n                        rightDiv.appendChild(document.createElement('hr'))\n\n                        rightsDiv.appendChild(rightDiv)\n                    }\n                    titleInformationOverlay.appendChild(rightsDiv)\n                }\n\n                // Restrictions data\n                let restrictionsDiv = document.createElement('div')\n                if (BAUnits[0]['restrictions'].length > 0) {\n                    let restrictionsLabel = document.createElement('strong')\n                    restrictionsLabel.textContent = 'Restrictions:'\n                    restrictionsDiv.appendChild(restrictionsLabel)\n                    for (restriction in BAUnits[0]['restrictions']) {\n                        let restrictionDiv = document.createElement('div')\n                        restrictionDiv.style = \"margin-left: 10px;\"\n\n                        // Restriction Type\n                        let restrictionTypeLabel  = document.createElement('strong')\n                        restrictionTypeLabel.textContent = 'Type: '\n                        restrictionDiv.appendChild(restrictionTypeLabel)\n\n                        let restrictionTypeText = document.createElement('span')\n                        restrictionTypeText.textContent = BAUnits[0]['restrictions'][restriction]['type']\n                        restrictionDiv.appendChild(restrictionTypeText)\n                        restrictionDiv.appendChild(document.createElement('br'))\n\n                        // Restriction description\n                        if (BAUnits[0]['restrictions'][restriction]['description']) {\n                            let restrictionDescriptionLabel  = document.createElement('strong')\n                            restrictionDescriptionLabel.textContent = 'Description: '\n                            restrictionDiv.appendChild(restrictionDescriptionLabel)\n    \n                            let restrictionDescriptionText = document.createElement('span')\n                            restrictionDescriptionText.textContent = BAUnits[0]['restrictions'][restriction]['description']\n                            restrictionDiv.appendChild(restrictionDescriptionText)\n                            restrictionDiv.appendChild(document.createElement('br'))\n                        }\n\n                        // Restriction Party\n                        let partyLabel  = document.createElement('strong')\n                        partyLabel.textContent = 'Party: '\n                        restrictionDiv.appendChild(partyLabel)\n\n                        let partyDiv = document.createElement('div')\n                        partyDiv.style = \"margin-left: 10px;\"\n\n                        //// Party name\n                        let partyNameLabel  = document.createElement('strong')\n                        partyNameLabel.textContent = 'Name: '\n                        partyDiv.appendChild(partyNameLabel)\n\n                        let partyNameText = document.createElement('span')\n                        partyNameText.textContent = BAUnits[0]['restrictions'][restriction]['party']['name']\n                        partyDiv.appendChild(partyNameText)\n                        partyDiv.appendChild(document.createElement('br'))\n\n                        //// Party type\n                        let partyTypeLabel  = document.createElement('strong')\n                        partyTypeLabel.textContent = 'Type: '\n                        partyDiv.appendChild(partyTypeLabel)\n\n                        let partyTypeText = document.createElement('span')\n                        partyTypeText.textContent = BAUnits[0]['restrictions'][restriction]['party']['type']\n                        partyDiv.appendChild(partyTypeText)\n                        partyDiv.appendChild(document.createElement('br'))\n\n                        restrictionDiv.appendChild(partyDiv)\n                        restrictionDiv.appendChild(document.createElement('hr'))\n\n                        restrictionsDiv.appendChild(restrictionDiv)\n                    }\n                    titleInformationOverlay.appendChild(restrictionsDiv)\n                }\n\n                // Responsibilities data\n                let responsibilitiesDiv = document.createElement('div')\n                if (BAUnits[0]['responsibilities'].length > 0) {\n                    let responsibilitiesLabel = document.createElement('strong')\n                    responsibilitiesLabel.textContent = 'Responsibilities:'\n                    responsibilitiesDiv.appendChild(responsibilitiesLabel)\n                    for (responsibility in BAUnits[0]['responsibilities']) {\n                        let responsibilityDiv = document.createElement('div')\n                        responsibilityDiv.style = \"margin-left: 10px;\"\n\n                        // Responsibility Type\n                        let responsibilityTypeLabel  = document.createElement('strong')\n                        responsibilityTypeLabel.textContent = 'Type: '\n                        responsibilityDiv.appendChild(responsibilityTypeLabel)\n\n                        let responsibilityTypeText = document.createElement('span')\n                        responsibilityTypeText.textContent = BAUnits[0]['responsibilities'][responsibility]['type']\n                        responsibilityDiv.appendChild(responsibilityTypeText)\n                        responsibilityDiv.appendChild(document.createElement('br'))\n\n                        // Responsibility description\n                        if (BAUnits[0]['responsibilities'][responsibility]['description']) {\n                            let responsibilityDescriptionLabel  = document.createElement('strong')\n                            responsibilityDescriptionLabel.textContent = 'Description: '\n                            responsibilityDiv.appendChild(responsibilityDescriptionLabel)\n    \n                            let responsibilityDescriptionText = document.createElement('span')\n                            responsibilityDescriptionText.textContent = BAUnits[0]['responsibilities'][responsibility]['description']\n                            responsibilityDiv.appendChild(responsibilityDescriptionText)\n                            responsibilityDiv.appendChild(document.createElement('br'))\n                        }\n\n                        // Responsibility Party\n                        let partyLabel  = document.createElement('strong')\n                        partyLabel.textContent = 'Party: '\n                        responsibilityDiv.appendChild(partyLabel)\n\n                        let partyDiv = document.createElement('div')\n                        partyDiv.style = \"margin-left: 10px;\"\n\n                        //// Party name\n                        let partyNameLabel  = document.createElement('strong')\n                        partyNameLabel.textContent = 'Name: '\n                        partyDiv.appendChild(partyNameLabel)\n\n                        let partyNameText = document.createElement('span')\n                        partyNameText.textContent = BAUnits[0]['responsibilities'][responsibility]['party']['name']\n                        partyDiv.appendChild(partyNameText)\n                        partyDiv.appendChild(document.createElement('br'))\n\n                        //// Party type\n                        let partyTypeLabel  = document.createElement('strong')\n                        partyTypeLabel.textContent = 'Type: '\n                        partyDiv.appendChild(partyTypeLabel)\n\n                        let partyTypeText = document.createElement('span')\n                        partyTypeText.textContent = BAUnits[0]['responsibilities'][responsibility]['party']['type']\n                        partyDiv.appendChild(partyTypeText)\n                        partyDiv.appendChild(document.createElement('br'))\n\n                        responsibilityDiv.appendChild(partyDiv)\n                        responsibilityDiv.appendChild(document.createElement('hr'))\n\n                        responsibilitiesDiv.appendChild(responsibilityDiv)\n                    }\n                    titleInformationOverlay.appendChild(responsibilitiesDiv)\n                }\n\n                // Display overlay\n                titleInformationOverlay.style.display = 'block'\n\n            }\n        })\n    })\n\n    function toggleLayers(filter) {\n        console.log(filter)\n        for (let i in floorplanLayers) {\n            console.log(floorplanLayers[i].layer)\n            console.log(floorplanLayers[i].layer.includes(filter))\n            if (floorplanLayers[i].layer.includes(filter)) {\n                let visibility = map.getLayoutProperty(floorplanLayers[i].layer, 'visibility')\n                console.log(visibility)\n                if (visibility === 'visible') {\n                    map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'none')\n                    this.className = ''\n                } else {  \n                    this.className = 'active'\n                    map.setLayoutProperty(floorplanLayers[i].layer, 'visibility', 'visible')\n                }\n            }\n        }\n    }\n    \n    let filterCheckboxes = document.getElementsByName('filter')\n    for (let i = 0; i<filterCheckboxes.length; i++) {\n        filterCheckboxes[i].addEventListener('change', function(e) {\n        let filter = e.target.value\n        e.preventDefault()\n        e.stopPropagation()\n        \n        toggleLayers(filter)  \n        })\n    }\n\n\n"],"sourceRoot":""}